{"version":3,"sources":["D2App/components/Schemas/Schemas.module.css","D2App/App.module.css","D2App/components/FormAlerts/FormAlerts.module.css","D2App/components/FormField/FormField.module.css","D2App/components/ImportButtonStrip/ImportButtonStrip.module.css","D2App/components/JobOverview/JobOverview.module.css","D2App/components/JobOverview/MenuLabel/MenuLabel.module.css","D2App/components/JobSummary/JobSummary.module.css","D2App/components/JobSummary/Summary/Summary.module.css","D2App/components/MoreOptions/MoreOptions.module.css","D2App/components/OrgUnitTree/OrgUnitTree.module.css","D2App/components/Page/Page.module.css","D2App/components/RadioGroup/RadioGroup.module.css","D2App/pages/JobOverview/JobOverview.module.css","D2App/components/Select/Select.module.css","D2App/components/SelectableList/SelectableList.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/components/StyledLink/StyledLink.module.css","D2App/contexts/User.js","D2App/contexts/Task.js","D2App/components/Icon/Icon.js","D2App/utils/tasks.js","D2App/hooks/useTasks.js","D2App/hooks/useUser.js","D2App/hooks/useProgramStages.js","D2App/hooks/useClassKeys.js","D2App/utils/mime.js","D2App/utils/xhr.js","D2App/utils/helper.js","D2App/utils/options.js","D2App/components/ElementSchemes/DataElementIdScheme.js","D2App/components/DataSetPicker/DataSetPicker.js","D2App/components/DataSetPicker/DataSetPickerField.js","D2App/components/DatePicker/DatePicker.js","D2App/components/DatePicker/DatePickerField.js","D2App/components/ElementSchemes/EventIdScheme.js","D2App/components/FileUpload/FileUpload.js","D2App/components/FormAlerts/FormAlerts.js","D2App/components/FormField/FormField.js","D2App/components/ElementSchemes/IdScheme.js","D2App/components/ImportButtonStrip/ImportButtonStrip.js","D2App/components/JobOverview/helper.js","D2App/components/JobOverview/MenuLabel/MenuLabel.js","D2App/components/JobOverview/JobOverview.js","D2App/components/JobSummary/Events/Events.js","D2App/components/JobSummary/helper.js","D2App/components/JobSummary/SingleStatusTable/SingleStatusTable.js","D2App/components/JobSummary/SingleSummary/SingleSummary.js","D2App/components/JobSummary/TypeCount/TypeCount.js","D2App/components/JobSummary/Messages/Messages.js","D2App/components/JobSummary/TypeReportSummary/TypeReportSummary.js","D2App/components/JobSummary/Summary/Summary.js","D2App/components/JobSummary/Details/Details.js","D2App/components/JobSummary/JobSummary.js","D2App/components/JobSummary/MiniJobSummary/MiniJobSummary.js","D2App/components/MoreOptions/MoreOptions.js","D2App/components/ElementSchemes/OrgUnitIdScheme.js","D2App/components/OrgUnitTree/Tree/Tree.js","D2App/components/OrgUnitTree/OrgUnitTree.js","D2App/components/OrgUnitTree/OrgUnitTreeField.js","D2App/components/Page/Page.js","D2App/components/ProgramPicker/ProgramPicker.js","D2App/components/ProgramPicker/ProgramPickerField.js","D2App/components/ProgramStages/ProgramStages.js","D2App/components/RadioGroup/RadioGroup.js","D2App/components/RadioGroup/RadioGroupField.js","D2App/components/Inputs/FileUpload.js","D2App/components/Inputs/ImportButtonStrip.js","D2App/components/Inputs/FormAlerts.js","D2App/components/Inputs/Format.js","D2App/components/Inputs/FirstRowIsHeader.js","D2App/components/Inputs/ClassKey.js","D2App/components/Inputs/Strategy.js","D2App/components/Inputs/PreheatCache.js","D2App/components/Inputs/SkipAudit.js","D2App/components/Inputs/SkipExistingCheck.js","D2App/components/Inputs/Identifier.js","D2App/components/Inputs/ImportReportMode.js","D2App/components/Inputs/PreheatMode.js","D2App/components/Inputs/ImportStrategy.js","D2App/components/Inputs/AtomicMode.js","D2App/components/Inputs/MergeMode.js","D2App/components/Inputs/FlushMode.js","D2App/components/Inputs/InclusionStrategy.js","D2App/components/Inputs/SkipSharing.js","D2App/components/Inputs/SkipValidation.js","D2App/components/Inputs/IsAsync.js","D2App/components/Inputs/OrgUnitTree.js","D2App/components/Inputs/DataSetPicker.js","D2App/components/Inputs/ProgramPicker.js","D2App/components/Inputs/IncludeChildren.js","D2App/components/Inputs/IncludeDeleted.js","D2App/components/Inputs/Compression.js","D2App/components/Inputs/Inclusion.js","D2App/components/Inputs/StartDate.js","D2App/components/Inputs/EndDate.js","D2App/components/Inputs/ExportButton.js","D2App/components/Inputs/ProgramStages.js","D2App/components/Schemas/helper.js","D2App/components/Schemas/SchemaGroup.js","D2App/components/Schemas/Schemas.js","D2App/components/Schemas/SchemasField.js","D2App/components/Inputs/Schemas.js","D2App/components/Inputs/ObjectType.js","D2App/components/Inputs/Objects.js","D2App/hooks/useObjects.js","D2App/components/Inputs/DataElementIdScheme.js","D2App/components/Inputs/EventIdScheme.js","D2App/components/Inputs/IdScheme.js","D2App/components/Inputs/OrgUnitIdScheme.js","D2App/components/WithAuthority/predicates.js","D2App/components/Inputs/OrgUnitMode.js","D2App/components/Inputs/TEITypeFilter.js","D2App/components/Inputs/ProgramStatus.js","D2App/components/Inputs/FollowUpStatus.js","D2App/components/Inputs/ProgramStartDate.js","D2App/components/Inputs/ProgramEndDate.js","D2App/components/TETypePicker/TETypePickerField.js","D2App/components/Inputs/TETypePicker.js","D2App/components/Inputs/LastUpdatedFilter.js","D2App/components/Inputs/LastUpdatedStartDate.js","D2App/components/Inputs/LastUpdatedEndDate.js","D2App/components/Duration/DurationField.js","D2App/components/Inputs/LastUpdatedDuration.js","D2App/components/Inputs/AssignedUserMode.js","D2App/components/UserPicker/UserPickerField.js","D2App/components/Inputs/UserPicker.js","D2App/components/Inputs/IncludeAllAttributes.js","D2App/utils/final-form.js","D2App/pages/MetadataImport/form-helper.js","D2App/pages/MetadataImport/MetadataImport.js","D2App/pages/MetadataExport/MetadataExport.js","D2App/pages/MetadataExport/form-helper.js","D2App/pages/MetadataDependencyExport/MetadataDependencyExport.js","D2App/pages/MetadataDependencyExport/form-helper.js","D2App/pages/JobOverview/JobOverview.js","D2App/pages/GMLImport/GMLImport.js","D2App/pages/GMLImport/form-helper.js","D2App/pages/EventImport/EventImport.js","D2App/pages/EventImport/form-helper.js","D2App/pages/EventExport/form-helper.js","D2App/pages/EventExport/EventExport.js","D2App/pages/DataImport/DataImport.js","D2App/pages/DataImport/form-helper.js","D2App/pages/DataExport/form-helper.js","D2App/pages/DataExport/DataExport.js","D2App/pages/TEIExport/form-helper.js","D2App/pages/TEIExport/TEIExport.js","D2App/pages/TEIImport/form-helper.js","D2App/pages/TEIImport/TEIImport.js","D2App/components/Router/Router.js","D2App/components/Select/Select.js","D2App/components/Select/SelectField.js","D2App/components/SelectableList/SelectableList.js","D2App/components/Sidebar/Sidebar.js","D2App/components/StyledLink/StyledLink.js","D2App/components/Switch/Switch.js","D2App/components/WithAuthority/WithAuthority.js","D2App/components/TETypePicker/TETypePicker.js","D2App/components/UserPicker/UserPicker.js","D2App/App.js"],"names":["module","exports","UserContext","React","createContext","undefined","TaskContext","getNewestTask","tasks","Object","keys","map","k","sort","a","b","created","createStyle","width","height","display","fill","color","userSelect","MetadataImportIcon","viewBox","style","data-test","d","MetadataExportIcon","MetadataDependencyExportIcon","DataIcon","EventIcon","GMLIcon","PlusIcon","MinusIcon","TasksIcon","TEIIcon","categoryTypes","key","importType","icon","label","i18n","t","allCategories","jobEventQuery","events","resource","id","type","taskId","jobSummaryQuery","summary","defaultTasks","data","event","gml","metadata","tei","defaultJobOverview","activeTypes","selectedJob","useTasks","engine","useDataEngine","setTasks","useState","jobOverview","setJobOverview","fetchSummary","async","task","newTask","error","query","variables","console","status","createFetchSummary","fetchEvents","completed","length","newEvents","filter","e","some","te","uid","level","text","message","date","Date","time","errorEvent","find","reverse","lastUpdated","setTimeout","createFetchEvents","addTask","entry","createAddTask","updateJobOverview","val","createUpdateJobOverview","userQuery","user","programStageQuery","fields","params","paging","ALL_LABEL","classKeyQuery","mapping","json","xml","csv","adx","pdf","getUploadXHR","url","upload","onResponse","onError","setProgress","format","xhr","XMLHttpRequest","contentType","getMimeType","withCredentials","open","setRequestHeader","name","onreadystatechange","onReadyStateChange","onprogress","onProgress","Math","floor","readyState","idAndMsg","extractIdAndMessage","JSON","parse","responseText","typeReports","response","Array","isArray","objectReports","errorReports","msg","evt","lengthComputable","percentComplete","parseInt","loaded","total","max","pathToId","path","pathSplit","split","jsDateToISO8601","getFullYear","toString","getMonth","padStart","getDate","jsDateToString","getHours","getMinutes","getSeconds","blobType","compression","createBlob","contents","URL","createObjectURL","Blob","downloadBlob","filename","link","document","createElement","href","setAttribute","body","appendChild","click","remove","fetchAttributes","apiBaseUrl","attribute","filters","fetch","credentials","then","resp","Promise","resolve","catch","Error","statusText","reject","fetcher","attributes","displayName","value","genericErrorMessage","errorGenerator","timestamp","getTime","critical","uploadFile","file","addEntry","errF","ev","target","e2","send","locationAssign","window","location","getPrevJobDetails","job","jobDetails","formatOptions","formatNoCsvOptions","f","formatAdxOptions","formatAdxPdfOptions","formatJsonpOptions","compressionOptions","objectTypeOptions","dataElementIdSchemeOptions","orgUnitIdSchemeOptions","idSchemeOptions","eventIdSchemeOptions","inclusionOptions","strategyOptions","importStrategyOptions","identifierOptions","importReportModeOptions","preheatModeOptions","atomicModeOptions","mergeModeOptions","flushModeOptions","inclusionStrategyOptions","orgUnitSelectionModeOptions","teiTypeFilterOptions","programStatusOptions","followUpStatusOptions","lastUpdatedFilterOptions","assignedUserModeOptions","defaultFormatOption","defaultCompressionOption","defaultObjectTypeOption","defaultDataElementIdSchemeOption","defaultOrgUnitIdSchemeOption","defaultIdSchemeOption","defaultEventIdSchemeOption","defaultInclusionOption","defaultStrategyOption","defaultIdentifierOption","defaultImportReportModeOption","defaultPreheatModeOption","defaultImportStrategyOption","defaultAtomicModeOption","defaultMergeModeOption","defaultFlushModeOption","defaultInclusionStrategyOption","defaultOrgUnitSelectionModeOption","defaultTEITypeFilterOption","defaultProgramStatusOption","defaultFollowUpStatusOption","defaultLastUpdatedFilterOption","defaultAssignedUserModeOption","optionPropType","PropTypes","exact","string","isRequired","DataElementIdScheme","arrayOf","dataTest","baseUrl","useConfig","loading","setLoading","schemes","setSchemes","setError","useEffect","validationText","options","SelectField","dense","dataSetQuery","dataSets","DataSetPicker","selected","setSelected","meta","multiSelect","withFilter","withActions","list","setList","useDataQuery","onComplete","showList","FormField","SelectableList","touched","pristine","SINGLE_DATASET_VALIDATOR","selectedDataSets","SINGLE_EXACT_DATASET_VALIDATOR","Wrapper","input","onChange","rest","DataSetPickerField","validator","component","validate","DatePicker","required","inputWidth","OPTIONAL_DATE_VALIDATOR","DATE_VALIDATOR","DATE_BEFORE_VALIDATOR","date1","date2","DATE_AFTER_VALIDATOR","inputName","DatePickerField","EventIdScheme","FileUpload","initialValue","accept","FileInput","FormAlerts","alerts","bars","setBars","newBars","warning","info","success","duration","className","styles","container","children","IdScheme","err","dataElementAttributes","organisationUnitAttributes","sharedAttributes","reduce","shared","collection","attributeFoundIn","DRYRUN_HELPTEXT","ImportButtonStrip","dryRunDataTest","importDataTest","form","primary","onClick","change","dryRun","secondary","categoryTypesObj","acc","cur","MenuLabel","files","substring","JobOverview","setActiveTypes","setSelectedJob","useContext","allTasks","flat","createdAt","filteredTasks","includes","items","Menu","chips","onChipClick","active","JobSummary","showFileDetails","showJobDetails","to","pathname","Events","statsPropTypeObj","deleted","number","ignored","updated","imported","getClassName","c","s","SingleStatusTable","property","description","SingleSummary","importCount","conflicts","i","object","TypeCount","stats","Messages","messages","m","TypeReportSummary","overviewStats","extractStats","responseType","Summary","report","allStats","allMessages","forEach","klass","r","push","mainKlass","errorProperty","typeReportParse","overviewSummary","allSummaries","importSummaries","valueToString","File","v","join","Details","details","Header","header","title","taskDetails","Tags","tags","positive","neutral","negative","bold","MiniJobSummary","MoreOptions","initiallyVisible","hidden","setHidden","OrgUnitIdScheme","Tree","select","onOpen","onClose","node","l","hasChildren","checked","rootQuery","roots","orgQuery","units","OrgUnitTree","setChildren","organisationUnits","formatList","toggleOpenStatus","hierarchy","p","newChildren","parent","el","showTree","newValue","ch","orgId","localeCompare","setChildrenFor","SINGLE_ORG_VALIDATOR","selectedOrgUnits","SINGLE_EXACT_ORG_VALIDATOR","OrgUnitTreeField","Page","desc","summaryTask","showFullSummaryTask","loadingEl","amount","iconAndTitle","preBody","content","programQuery","programs","ProgramPicker","autoSelectFirst","defaultProps","SINGLE_PROGRAM_VALIDATOR","selectedPrograms","SINGLE_EXACT_PROGRAM_VALIDATOR","ProgramPickerField","ProgramStages","program","programStagesLoading","programStagesError","programStagesValidationText","programStages","stages","setStages","formattedList","useProgramStages","RadioGroup","setValue","vertical","inputs","o","radio","help","RadioGroupField","LABEL","VALIDATOR","Format","availableFormats","FirstRowIsHeader","show","Switch","ClassKey","prevValue","classKeysLoading","classKeysError","classKeysValidationText","classKeys","setClassKeys","classData","useClassKeys","filterable","Strategy","HELPTEXT","PreheatCache","SkipAudit","SkipExistingCheck","Identifier","ImportReportMode","PreheatMode","ImportStrategy","AtomicMode","MergeMode","FlushMode","InclusionStrategy","SkipSharing","SkipValidation","IsAsync","orgValidator","composeValidators","hasValue","dataSetValidator","programValidator","IncludeChildren","IncludeDeleted","Compression","availableCompressions","Inclusion","StartDate","EndDate","ExportButton","programStage","props","findLabelByLowerCaseComparison","groupKey","schemas","foundLabel","schemaName","toLowerCase","isGroupKeyMatchingLowerCaseSchemaName","findKeyByCamelCaseComparison","indexOf","isGroupKeyInSchemaName","str","substr","replace","toUpperCase","getSchemaGroups","groups","combinedGroups","groupName","group","other","combineSingleItemGroups","schema","groupSchemas","getGroupLabels","schemaGroups","entries","groupLabels","lowerCaseGroupKey","extractGroupLabelFromSchemas","pop","SchemaGroup","toggleSchema","formLabel","ind","schemaQuery","Schemas","excludeSchemas","setCheckedSchemas","checkedByDefault","setSchemaGroups","schemaGroupLabels","setSchemaGroupLabels","schemaGroupOrder","setSchemaGroupOrder","formattedSchemas","collectionName","formatSchemas","excludedSchemas","has","filterOutExcludedSchemas","groupKeys","getGroupOrder","propagateCheckedSchemas","updatedSchemaGroups","onSelectGeneric","grAcc","showSchemas","formControl","schemaGroup","updatedGroup","SchemasField","checkedSchemas","EXCLUDE_SCHEMAS","Set","ObjectType","filled","initialFocus","Objects","objectType","objectsLoading","objectsError","objectsValidationText","objects","setObjects","useObjects","hasAuthorityToSkipAudit","authorities","OrgUnitMode","TEITypeFilter","ProgramStatus","FollowUpStatus","ProgramStartDate","ProgramEndDate","SINGLE_TETYPE_VALIDATOR","selectedTypes","SINGLE_EXACT_TETYPE_VALIDATOR","TETypePickerField","TETypePicker","teTypeValidator","LastUpdatedFilter","LastUpdatedStartDate","LastUpdatedEndDate","durationRegex","formatHelpText","helpText","placeholder","DurationField","match","LastUpdatedDuration","AssignedUserMode","SINGLE_USER_VALIDATOR","selectedUsers","SINGLE_EXACT_USER_VALIDATOR","UserPickerField","UserPicker","userValidator","IncludeAllAttributes","FORM_ERROR","values","classKey","PAGE_NAME","PAGE_DESCRIPTION","PAGE_ICON","MetadataImport","metadataTasks","useLocation","prevJobDetails","initialValues","identifier","importReportMode","preheatMode","importStrategy","firstRowIsHeader","atomicMode","mergeMode","flushMode","inclusionStrategy","skipSharing","skipValidation","isAsync","createInitialValues","progress","setShowFullSummaryTask","onSubmit","formErrors","onImport","subscription","submitError","render","handleSubmit","MetadataExport","endpointExtension","schemaParams","downloadUrlParams","onExport","MetadataDependencyExport","endpoint","types","GMLImport","gmlTasks","EventImport","eventTasks","dataElementIdScheme","orgUnitIdScheme","eventIdScheme","idScheme","startDate","endDate","today","includeDeleted","inclusion","EventExport","DataImport","dataTasks","strategy","preheatCache","skipAudit","skipExistingCheck","WithAuthority","pred","dataValueSetQuery","sets","orgUnit","dataSet","includeChildren","DataExport","dataStr","stringify","zip","JSZip","generateAsync","errors","minimizeParams","selectedTETypes","ouMode","includeAllAttributes","assignedUserMode","teiTypeFilter","programStatus","followUpStatus","programStartDate","programEndDate","lastUpdatedFilter","lastUpdatedStartDate","lastUpdatedEndDate","lastUpdatedDuration","minParams","ou","assign","assignedUser","trackedEntity","teiQuery","x","ret","TEIExport","teis","teiStr","TEIImport","teiTasks","Router","from","Select","noMatchText","optionEls","setFilter","onSelect","actions","action","all","dataImportPage","code","eventImportPage","gmlImportPage","metadataImportPage","teiImportPage","dataExportPage","eventExportPage","metadataDependencyExportPage","metadataExportPage","teiExportPage","importPages","exportPages","jobOverviewPage","SidebarItem","StyledLink","Sidebar","sectionTitle","passThroughProps","SwitchUI","teTypeQuery","teTypes","trackedEntityTypes","users","App","log","useUser","showApp","Provider","sidebar"],"mappings":"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","file":"static/js/app.a16b2c4d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Schemas_container__3H0XX\",\"group\":\"Schemas_group__QeGXq\",\"schema\":\"Schemas_schema__36IFP\",\"formLabel\":\"Schemas_formLabel__1geS0\",\"formControl\":\"Schemas_formControl__2ycln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FormAlerts_container__JPYH9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FormField_container__3nG83\",\"label\":\"FormField_label__2Au43\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dryRun\":\"ImportButtonStrip_dryRun__112kw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"JobOverview_container__1_oyo\",\"items\":\"JobOverview_items__2B1hs\",\"Menu\":\"JobOverview_Menu__2bTUp\",\"summary\":\"JobOverview_summary__13xs1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MenuLabel_container__ZTyjb\",\"status\":\"MenuLabel_status__1UTMj\",\"date\":\"MenuLabel_date__1r_sY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"JobSummary_container__2Zh6N\",\"title\":\"JobSummary_title__sZ7p4\",\"taskDetails\":\"JobSummary_taskDetails__3aEqI\",\"tags\":\"JobSummary_tags__3qnhf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rest\":\"Summary_rest__GeByI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MoreOptions_container__2zKqV\",\"header\":\"MoreOptions_header__120Ww\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrgUnitTree_container__tSgX2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Page_container__3NEqL\",\"content\":\"Page_content__39Ql1\",\"preBody\":\"Page_preBody__3d4Jp\",\"header\":\"Page_header__13-dA\",\"title\":\"Page_title__rl9Ut\",\"desc\":\"Page_desc__2uKSe\",\"icon\":\"Page_icon__20L2r\",\"iconAndTitle\":\"Page_iconAndTitle__32JzE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputs\":\"RadioGroup_inputs__2MDMV\",\"radio\":\"RadioGroup_radio__2G6wY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"JobOverview_container__F-fbL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"Select_select__3_2MB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"SelectableList_body__80Xuu\",\"filter\":\"SelectableList_filter__SHsK2\",\"actions\":\"SelectableList_actions__1Pw1O\",\"action\":\"SelectableList_action__kmkJr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"Sidebar_Menu__3Gy0D\",\"sectionTitle\":\"Sidebar_sectionTitle__lKKbo\",\"jobOverview\":\"Sidebar_jobOverview__2MJ0c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"StyledLink_link__1GAq7\"};","import React from 'react';\nconst UserContext = React.createContext(undefined);\nexport { UserContext };","import React from 'react';\nconst TaskContext = React.createContext(undefined);\n\nconst getNewestTask = tasks => Object.keys(tasks).map(k => tasks[k]).sort((a, b) => a.created < b.created ? 1 : -1)[0];\n\nexport { TaskContext, getNewestTask };","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst createStyle = (width, height) => ({\n  width: width || 24,\n  height: height || 24,\n  display: 'inline-block',\n  fill: 'current-color',\n  color: 'current-color',\n  userSelect: 'none'\n});\n\nexport const MetadataImportIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-metadataimport\">\n        <path d=\"M14.039 8.968l-3.961-3.968h1.968s.991-3.178-2.985-5c6.191.222 6.972 5 6.972 5h1.967l-3.961 3.968zm6.461 5.575l-.342.195v1.717l.342-.195v-1.717zm-.844.481l-.35.199v1.717l.35-.199v-1.717zm.906-10.024l-1.306 1.55 1.62.919-6.859 3.698-8.86-5.138 4.436-2.685c-.234-.5-.626-.989-1.313-1.338l-5.124 2.978-3.156 5.487 2 1.106v5.445l12.25 6.978 9.75-5.551v-11.508l-3.438-1.941zm-16.624 2.688l7.897 4.54-1.192 2.091-7.872-4.605 1.167-2.026zm9.062 13.298l-9-5.126v-3.112l7.377 4.319 1.623-2.845v6.764zm9-3.7l-7 3.985v-8.361l7-3.773v8.149zm-4.907-.802l-.349.199v1.713l.349-.195v-1.717zm.584-.333l-.343.195v1.717l.343-.195v-1.717zm1.395-.794l-.343.195v1.717l.343-.195v-1.717zm-.574.327l-.344.196v1.717l.344-.196v-1.717z\" />\n    </svg>;\nexport const MetadataExportIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-metadataexport\">\n        <path d=\"M13.904 9c-3.514-3.984-.1-7.598-.1-7.598l-1.393-1.389 5.589-.013v5.607l-1.372-1.391c0 .001-3.581.706-2.724 4.784zm5.752 6.024l-.35.199v1.717l.35-.199v-1.717zm.844-.481l-.342.195v1.717l.342-.195v-1.717zm-3.407 1.941l-.349.199v1.713l.349-.195v-1.717zm1.979-1.127l-.343.195v1.717l.343-.195v-1.717zm.949-10.673v2.295l.855.489-6.859 3.698-8.86-5.138 6.374-3.654-1.5-1.406-6.864 3.97-3.167 5.533 2 1.106v5.445l12.25 6.978 9.75-5.551v-11.508l-3.979-2.257zm-16.083 3.004l7.897 4.54-1.193 2.091-7.871-4.605 1.167-2.026zm9.062 13.298l-9-5.126v-3.112l5.632 3.297 1.746 1.022 1.002-1.757.62-1.088v6.764zm9-3.7l-7 3.985v-8.361l7-3.773v8.149zm-4.323-1.135l-.343.195v1.717l.343-.195v-1.717zm.821-.467l-.344.196v1.717l.344-.196v-1.717z\" />\n    </svg>;\nexport const MetadataDependencyExportIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-metadatadependencyexport\">\n        <path d=\"M16.949 16.132h2.332c-1.092 1.728-3.605 3.638-6.281 3.852v-8.984h3v-2h-3v-1.103c0-2.39 2-2.619 2-4.897 0-1.654-1.346-3-3-3s-3 1.346-3 3c0 2.297 2 2.487 2 4.897v1.103h-3v2h3v9c-2.639-.18-5.133-2.053-6.281-3.868h2.332l-5.051-3.132v5.912l1.269-1.8c2.702 4.503 6.379 4.305 8.731 6.888 2.352-2.583 6.029-2.385 8.731-6.889l1.269 1.8v-5.911l-5.051 3.132zm-5.949-13.132c0-.551.449-1 1-1s1 .449 1 1-.448 1-1 1-1-.449-1-1z\" />\n    </svg>;\nexport const DataIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-data\">\n        <path d=\"M6.083 4c1.38 1.612 2.578 3 4.917 3h11v13h-20v-16h4.083zm.917-2h-7v20h24v-17h-13c-1.629 0-2.305-1.058-4-3z\" />\n    </svg>;\nexport const EventIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-event\">\n        <path d=\"M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm6 0h-4v4h4v-4zm-6-6h-4v4h4v-4zm16-8v22h-24v-22h3v1c0 1.103.897 2 2 2s2-.897 2-2v-1h10v1c0 1.103.897 2 2 2s2-.897 2-2v-1h3zm-2 6h-20v14h20v-14zm-2-7c0-.552-.447-1-1-1s-1 .448-1 1v2c0 .552.447 1 1 1s1-.448 1-1v-2zm-14 2c0 .552-.447 1-1 1s-1-.448-1-1v-2c0-.552.447-1 1-1s1 .448 1 1v2z\" />\n    </svg>;\nexport const GMLIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-gml\">\n        <path d=\"M13.144 8.171c-.035-.066.342-.102.409-.102.074.009-.196.452-.409.102zm-2.152-3.072l.108-.031c.064.055-.072.095-.051.136.086.155.021.248.008.332-.014.085-.104.048-.149.093-.053.066.258.075.262.085.011.033-.375.089-.304.171.096.136.824-.195.708-.176.225-.113.029-.125-.097-.19-.043-.215-.079-.547-.213-.68l.088-.102c-.206-.299-.36.362-.36.362zm13.008 6.901c0 6.627-5.373 12-12 12-6.628 0-12-5.373-12-12s5.372-12 12-12c6.627 0 12 5.373 12 12zm-8.31-5.371c-.006-.146-.19-.284-.382-.031-.135.174-.111.439-.184.557-.104.175.567.339.567.174.025-.277.732-.063.87-.025.248.069.643-.226.211-.381-.355-.13-.542-.269-.574-.523 0 0 .188-.176.106-.166-.218.027-.614.786-.614.395zm6.296 5.371c0-1.035-.177-2.08-.357-2.632-.058-.174-.189-.312-.359-.378-.256-.1-1.337.597-1.5.254-.107-.229-.324.146-.572.008-.12-.066-.454-.515-.605-.46-.309.111.474.964.688 1.076.201-.152.852-.465.992-.038.268.804-.737 1.685-1.251 2.149-.768.694-.624-.449-1.147-.852-.275-.211-.272-.66-.55-.815-.124-.07-.693-.725-.688-.813l-.017.166c-.094.071-.294-.268-.315-.321 0 .295.48.765.639 1.001.271.405.416.995.748 1.326.178.178.858.914 1.035.898.193-.017.803-.458.911-.433.644.152-1.516 3.205-1.721 3.583-.169.317.138 1.101.113 1.476-.029.433-.37.573-.693.809-.346.253-.265.745-.556.925-.517.318-.889 1.353-1.623 1.348-.216-.001-1.14.36-1.261.007-.094-.256-.22-.45-.353-.703-.13-.248-.015-.505-.173-.724-.109-.152-.475-.497-.508-.677-.002-.155.117-.626.28-.708.229-.117.044-.458.016-.656-.048-.354-.267-.646-.53-.851-.389-.299-.188-.537-.097-.964 0-.204-.124-.472-.398-.392-.564.164-.393-.44-.804-.413-.296.021-.538.209-.813.292-.346.104-.7-.082-1.042-.125-1.407-.178-1.866-1.786-1.499-2.946.037-.19-.114-.542-.048-.689.158-.352.48-.747.762-1.014.158-.15.361-.112.547-.229.287-.181.291-.553.572-.781.4-.325.946-.318 1.468-.388.278-.037 1.336-.266 1.503-.06 0 .038.191.604-.019.572.433.023 1.05.749 1.461.579.211-.088.134-.736.567-.423.262.188 1.436.272 1.68.069.15-.124.234-.93.052-1.021.116.115-.611.124-.679.098-.12-.044-.232.114-.425.025.116.055-.646-.354-.218-.667-.179.131-.346-.037-.539.107-.133.108.062.18-.128.274-.302.153-.53-.525-.644-.602-.116-.076-1.014-.706-.77-.295l.789.785c-.039.025-.207-.286-.207-.059.053-.135.02.579-.104.347-.055-.089.09-.139.006-.268 0-.085-.228-.168-.272-.226-.125-.155-.457-.497-.637-.579-.05-.023-.764.087-.824.11-.07.098-.13.201-.179.311-.148.055-.287.126-.419.214l-.157.353c-.068.061-.765.291-.769.3.029-.075-.487-.171-.453-.321.038-.165.213-.68.168-.868-.048-.197 1.074.284 1.146-.235.029-.225.046-.487-.313-.525.068.008.695-.246.799-.36.146-.168.481-.442.724-.442.284 0 .223-.413.354-.615.131.053-.07.376.087.507-.01-.103.445.057.489.033.104-.054.684-.022.594-.294-.1-.277.051-.195.181-.253-.022.009.34-.619.402-.413-.043-.212-.421.074-.553.063-.305-.024-.176-.52-.061-.665.089-.115-.243-.256-.247-.036-.006.329-.312.627-.241 1.064.108.659-.735-.159-.809-.114-.28.17-.509-.214-.364-.444.148-.235.505-.224.652-.476.104-.178.225-.385.385-.52.535-.449.683-.09 1.216-.041.521.048.176.124.104.324-.069.19.286.258.409.099.07-.092.229-.323.298-.494.089-.222.901-.197.334-.536-.374-.223-2.004-.672-3.096-.672-.236 0-.401.263-.581.412-.356.295-1.268.874-1.775.698-.519-.179-1.63.66-1.808.666-.065.004.004-.634.358-.681-.153.023 1.247-.707 1.209-.859-.046-.18-2.799.822-2.676 1.023.059.092.299.092-.016.294-.18.109-.372.801-.541.801-.505.221-.537-.435-1.099.409l-.894.36c-1.328 1.411-2.247 3.198-2.58 5.183-.013.079.334.226.379.28.112.134.112.712.167.901.138.478.479.744.74 1.179.154.259.41.914.329 1.186.108-.178 1.07.815 1.246 1.022.414.487.733 1.077.061 1.559-.217.156.33 1.129.048 1.368l-.361.093c-.356.219-.195.756.021.982 1.818 1.901 4.38 3.087 7.22 3.087 5.517 0 9.989-4.472 9.989-9.989zm-11.507-6.357c.125-.055.293-.053.311-.22.015-.148.044-.046.08-.1.035-.053-.067-.138-.11-.146-.064-.014-.108.069-.149.104l-.072.019-.068.087.008.048-.087.106c-.085.084.002.139.087.102z\" />\n    </svg>;\nexport const LogoIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-logo\">\n        <path d=\"M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z\" />\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </svg>;\nexport const PlusIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-plus\">\n        <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </svg>;\nexport const MinusIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-minus\">\n        <path d=\"M19 13H5v-2h14v2z\" />\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n    </svg>;\nexport const TasksIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)} data-test=\"icon-tasks\">\n        <path d=\"M19 2h-4.2C14.4.8 13.3 0 12 0c-1.3 0-2.4.8-2.8 2H5C4 2 3 3 3 4v16c0 1 1 2 2 2h14c1 0 2-1 2-2V4c0-1-1-2-2-2zm-7 0c.6 0 1 .5 1 1s-.5 1-1 1-1-.5-1-1 .5-1 1-1zm7 18H5V4h2v3h10V4h2v16z\"></path>\n    </svg>;\nexport const TEIIcon = ({\n  width,\n  height\n}) => <svg viewBox=\"0 0 24 24\" style={createStyle(width, height)}>\n        <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n        <path d=\"M13 1l.001 3.062A8.004 8.004 0 0 1 19.938 11H23v2l-3.062.001a8.004 8.004 0 0 1-6.937 6.937L13 23h-2v-3.062a8.004 8.004 0 0 1-6.938-6.937L1 13v-2h3.062A8.004 8.004 0 0 1 11 4.062V1h2zm-1 9a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\" />\n    </svg>;\nconst iconPropTypes = {\n  height: PropTypes.number,\n  width: PropTypes.number\n};\nDataIcon.propTypes = iconPropTypes;\nEventIcon.propTypes = iconPropTypes;\nGMLIcon.propTypes = iconPropTypes;\nLogoIcon.propTypes = iconPropTypes;\nMetadataDependencyExportIcon.propTypes = iconPropTypes;\nMetadataExportIcon.propTypes = iconPropTypes;\nMetadataImportIcon.propTypes = iconPropTypes;\nMinusIcon.propTypes = iconPropTypes;\nPlusIcon.propTypes = iconPropTypes;\nTasksIcon.propTypes = iconPropTypes;\nTEIIcon.propTypes = iconPropTypes;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataIcon, EventIcon, GMLIcon, MetadataImportIcon, TEIIcon } from '../components/Icon/Icon';\nconst categoryTypes = [{\n  key: 'data',\n  importType: 'DATAVALUE_IMPORT',\n  icon: <DataIcon />,\n  label: i18n.t('Data')\n}, {\n  key: 'event',\n  importType: 'EVENT_IMPORT',\n  icon: <EventIcon />,\n  label: i18n.t('Event')\n}, {\n  key: 'gml',\n  importType: 'GML_IMPORT',\n  icon: <GMLIcon />,\n  label: i18n.t('GML')\n}, {\n  key: 'metadata',\n  importType: 'METADATA_IMPORT',\n  icon: <MetadataImportIcon />,\n  label: i18n.t('Metadata')\n}, {\n  key: 'tei',\n  importType: 'TEI_IMPORT',\n  icon: <TEIIcon />,\n  label: i18n.t('TEI')\n}];\nconst allCategories = categoryTypes.map(({\n  importType\n}) => importType);\nexport { categoryTypes, allCategories };","import { useState } from 'react';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { allCategories } from '../utils/tasks';\nconst jobEventQuery = {\n  events: {\n    resource: 'system/tasks/',\n    id: ({\n      type,\n      taskId\n    }) => `${type}/${taskId}`\n  }\n};\nconst jobSummaryQuery = {\n  summary: {\n    resource: 'system/taskSummaries/',\n    id: ({\n      type,\n      taskId\n    }) => `${type}/${taskId}`\n  }\n};\nconst defaultTasks = {\n  data: {},\n  event: {},\n  gml: {},\n  metadata: {},\n  tei: {}\n};\nconst defaultJobOverview = {\n  activeTypes: allCategories,\n  selectedJob: undefined\n};\nconst defaultRefetchPeriod = 2000;\n\nconst createFetchEvents = (engine, setTasks, fetchSummary) => (type, id, task) => {\n  const fetchEvents = async () => {\n    if (task.completed) {\n      return;\n    }\n\n    const newTask = { ...task\n    };\n    const {\n      events,\n      error\n    } = await engine.query(jobEventQuery, {\n      variables: {\n        type: task.importType,\n        taskId: task.id\n      }\n    });\n\n    if (error) {\n      console.error('fetchEvents error: ', error);\n      return;\n    }\n\n    if (events && events.length) {\n      const newEvents = events.filter(e => !task.events.some(te => te.id == e.uid)).map(e => ({\n        id: e.uid,\n        level: e.level,\n        text: e.message,\n        date: new Date(e.time)\n      }));\n      const errorEvent = newEvents.find(e => e.level == 'ERROR');\n\n      if (errorEvent) {\n        newTask.error = errorEvent.text;\n      }\n\n      newTask.events = [...newTask.events, ...newEvents.reverse()];\n      newTask.completed = events[0].completed;\n    }\n\n    newTask.lastUpdated = new Date();\n\n    if (!newTask.completed) {\n      setTimeout(() => fetchEvents(type, id, newTask), defaultRefetchPeriod);\n    } else {\n      fetchSummary(type, id, newTask);\n    }\n\n    setTasks(tasks => ({ ...tasks,\n      [type]: { ...tasks[type],\n        [id]: newTask\n      }\n    }));\n  };\n\n  fetchEvents();\n};\n\nconst createFetchSummary = (engine, setTasks) => async (type, id, task) => {\n  const newTask = { ...task\n  };\n  const {\n    summary,\n    error\n  } = await engine.query(jobSummaryQuery, {\n    variables: {\n      type: task.importType,\n      taskId: task.id\n    }\n  });\n\n  if (error) {\n    console.error('fetchSummary error: ', error);\n    return;\n  }\n\n  if (summary && summary.status == 'ERROR' && !newTask.error) {\n    newTask.error = true;\n  }\n\n  newTask.summary = summary;\n  setTasks(tasks => ({ ...tasks,\n    [type]: { ...tasks[type],\n      [id]: newTask\n    }\n  }));\n};\n\nconst createAddTask = (setTasks, fetchEvents) => (type, id, entry) => {\n  setTasks(tasks => ({ ...tasks,\n    [type]: { ...tasks[type],\n      [id]: entry\n    }\n  }));\n  fetchEvents(type, id, entry);\n};\n\nconst createUpdateJobOverview = setJobOverview => val => {\n  setJobOverview(jobOverview => ({ ...jobOverview,\n    ...val\n  }));\n};\n\nconst useTasks = () => {\n  const engine = useDataEngine();\n  const [tasks, setTasks] = useState(defaultTasks);\n  const [jobOverview, setJobOverview] = useState(defaultJobOverview);\n  const fetchSummary = createFetchSummary(engine, setTasks);\n  const fetchEvents = createFetchEvents(engine, setTasks, fetchSummary);\n  const addTask = createAddTask(setTasks, fetchEvents);\n  const updateJobOverview = createUpdateJobOverview(setJobOverview);\n  return {\n    tasks,\n    addTask,\n    jobOverview,\n    updateJobOverview\n  };\n};\n\nexport { useTasks };","import { useDataQuery } from '@dhis2/app-runtime';\nconst userQuery = {\n  user: {\n    resource: 'me'\n  }\n};\n\nconst useUser = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(userQuery);\n\n  if (error) {\n    console.log('useUser error: ', error);\n  }\n\n  return {\n    loading,\n    error,\n    user: data && data.user\n  };\n};\n\nexport { useUser };","import { useState, useEffect } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataEngine } from '@dhis2/app-runtime';\nconst programStageQuery = {\n  data: {\n    resource: 'programs',\n    fields: 'id,displayName',\n    id: ({\n      id\n    }) => `${id}`,\n    params: {\n      fields: 'programStages[id,displayName]',\n      paging: 'false'\n    }\n  }\n};\nconst ALL_VALUE = '';\nconst ALL_LABEL = `[ ${i18n.t('All program stages')} ]`;\n\nconst useProgramStages = (program, setSelected) => {\n  const engine = useDataEngine();\n  const [error, setError] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [stages, setStages] = useState([]);\n  useEffect(() => {\n    if (program) {\n      setLoading(true);\n      setSelected(undefined);\n    } else {\n      setLoading(false);\n    }\n\n    if (program) {\n      engine.query(programStageQuery, {\n        variables: {\n          id: program\n        },\n        onComplete: data => {\n          const list = data.data.programStages;\n          const formattedList = list.map(e => ({\n            value: e.id,\n            label: e.displayName\n          }));\n          setStages([{\n            value: ALL_VALUE,\n            label: ALL_LABEL\n          }, ...formattedList]);\n          setSelected({\n            value: ALL_VALUE,\n            label: ALL_LABEL\n          });\n          setLoading(false);\n        },\n        onError: error => {\n          setError(error);\n          console.error('useProgramStages error: ', error);\n        }\n      });\n    }\n  }, [program]);\n  const validationText = error && `${i18n.t('Something went wrong when loading the program stages')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    programStages: stages\n  };\n};\n\nexport { useProgramStages, ALL_VALUE };","import { useState } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nconst classKeyQuery = {\n  keys: {\n    resource: 'metadata/csvImportClasses'\n  }\n};\n\nconst useClassKeys = (setValue, prevValue) => {\n  const [classKeys, setClassKeys] = useState([]);\n  const {\n    loading,\n    error\n  } = useDataQuery(classKeyQuery, {\n    onComplete: classData => {\n      setClassKeys(classData.keys.map(k => ({\n        value: k,\n        label: k\n      })));\n\n      if (prevValue) {\n        setValue(prevValue);\n      } else {\n        setValue({\n          value: classData.keys[0],\n          label: classData.keys[0]\n        });\n      }\n    },\n    onError: error => {\n      console.error('useClassKeys error: ', error);\n    }\n  });\n  const validationText = error && `${i18n.t('Something went wrong when loading the class keys')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    classKeys\n  };\n};\n\nexport { useClassKeys };","const mapping = {\n  json: 'application/json',\n  xml: 'application/xml',\n  csv: 'application/csv',\n  gml: 'application/xml',\n  adx: 'application/adx+xml',\n  pdf: 'application/pdf'\n};\nexport const getMimeType = format => mapping[format] || null;","import { getMimeType } from './mime';\n\nconst getUploadXHR = ({\n  url,\n  upload,\n  type,\n  onResponse,\n  onError,\n  setProgress,\n  format\n}) => {\n  const xhr = new XMLHttpRequest();\n  const contentType = getMimeType(format);\n  xhr.withCredentials = true;\n  xhr.open('POST', url, true);\n  xhr.setRequestHeader('Content-Type', contentType);\n  xhr.setRequestHeader('Content-Disposition', 'attachment filename=\"' + upload.name + '\"');\n  xhr.onreadystatechange = onReadyStateChange({\n    xhr,\n    type,\n    onResponse,\n    onError\n  });\n  xhr.upload.onprogress = onProgress(setProgress);\n  return xhr;\n};\n\nconst onReadyStateChange = ({\n  xhr,\n  type,\n  onResponse,\n  onError\n}) => {\n  return e => {\n    const status = Math.floor(xhr.status / 100);\n\n    if (xhr.readyState === 4 && status === 2) {\n      const idAndMsg = extractIdAndMessage(xhr);\n      onResponse({ ...idAndMsg,\n        type: type\n      });\n    } else if (xhr.readyState === 4) {\n      onError(e);\n    }\n  };\n};\n\nconst extractIdAndMessage = xhr => {\n  const data = JSON.parse(xhr.responseText);\n  const {\n    message,\n    status,\n    typeReports,\n    response\n  } = data;\n\n  if (status && status === 'ERROR') {\n    if (Array.isArray(typeReports) && Array.isArray(typeReports[0].objectReports) && Array.isArray(typeReports[0].objectReports[0].errorReports)) {\n      return {\n        error: true,\n        msg: {\n          id: 'init',\n          text: typeReports[0].objectReports[0].errorReports[0].message,\n          date: new Date()\n        },\n        typeReports: data\n      };\n    }\n  }\n\n  if (typeof response !== 'undefined') {\n    return {\n      id: response.id,\n      msg: {\n        id: 'init',\n        text: message,\n        date: new Date(response.created)\n      }\n    };\n  }\n\n  return {\n    error: true\n  };\n};\n\nconst onProgress = setProgress => evt => {\n  if (evt.lengthComputable) {\n    const percentComplete = parseInt(evt.loaded / evt.total * 100);\n    setProgress(Math.max(1, percentComplete));\n  }\n};\n\nexport { getUploadXHR };","import i18n from '@dhis2/d2-i18n';\nimport { getUploadXHR } from './xhr';\n\nconst trimString = (length, string) => string.length > length ? string.substring(0, length - 3) + '...' : string;\n\nconst pathToId = path => {\n  const pathSplit = path.split('/');\n  const orgId = pathSplit[pathSplit.length - 1];\n  return orgId;\n};\n\nconst jsDateToISO8601 = date => `${date.getFullYear().toString()}-${(date.getMonth() + 1).toString().padStart(2, 0)}-${date.getDate().toString().padStart(2, 0)}`;\n\nconst jsDateToString = date => `${jsDateToISO8601(date)} ${date.getHours().toString().padStart(2, 0)}:${date.getMinutes().toString().padStart(2, 0)}:${date.getSeconds().toString().padStart(2, 0)}\n`;\n\nconst blobType = (format, compression) => {\n  if (compression === 'gzip') {\n    return `application/${format}+gzip`;\n  } else if (compression === 'zip') {\n    return `application/${format}+zip`;\n  }\n\n  if (format === 'xml') {\n    return 'application/xml';\n  } else if (format === 'json') {\n    return 'application/json';\n  }\n};\n\nconst createBlob = (contents, format, compression = 'none') => {\n  return URL.createObjectURL(new Blob([contents], {\n    type: blobType(format, compression)\n  }));\n};\n\nconst downloadBlob = (url, filename) => {\n  const link = document.createElement('a');\n  link.href = url;\n  link.setAttribute('download', filename);\n  document.body.appendChild(link);\n  link.click();\n  link.remove();\n};\n\nconst fetchAttributes = async (apiBaseUrl, attribute) => {\n  const fetcher = url => fetch(url, {\n    credentials: 'include'\n  }).then(resp => {\n    if (resp.status >= 200 && resp.status < 300) {\n      return Promise.resolve(resp.json());\n    } else {\n      throw resp;\n    }\n  }).catch(resp => {\n    const error = new Error(resp.statusText || resp.status);\n    console.error(`fetchAttributes ${attribute} fetch error: `, error);\n    return Promise.reject(error);\n  });\n\n  const fields = 'id,displayName';\n  const filters = `unique:eq:true&filter=${attribute}:eq:true`;\n  const url = `${apiBaseUrl}attributes.json?paging=false&fields=${fields}&filter=${filters}`;\n  const json = await fetcher(url).catch(error => Promise.reject(error));\n  return json.attributes.map(({\n    id,\n    displayName\n  }) => ({\n    value: `ATTRIBUTE:${id}`,\n    label: displayName\n  }));\n};\n\nconst genericErrorMessage = i18n.t('An unknown error occurred. Please try again later');\n\nconst errorGenerator = setProgress => message => {\n  const timestamp = new Date().getTime();\n  setProgress(0);\n  return {\n    id: `xhr-${timestamp}`,\n    critical: true,\n    message: message ? message : genericErrorMessage\n  };\n};\n\nconst uploadFile = ({\n  url,\n  file,\n  format,\n  type,\n  setProgress,\n  addEntry\n}) => {\n  setProgress(1);\n  const errF = errorGenerator(setProgress);\n  return new Promise((resolve, reject) => {\n    try {\n      const xhr = getUploadXHR({\n        url,\n        upload: file,\n        type,\n        onResponse: ({\n          error,\n          id,\n          msg,\n          typeReports\n        }) => {\n          let entry;\n\n          if (error && msg) {\n            // error but we have a message\n            entry = {\n              id: new Date().getTime(),\n              level: 'ERROR',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: true,\n              events: [msg],\n              summary: typeReports,\n              error: true,\n              importType: type\n            };\n          } else if (error) {\n            // error with no message\n            entry = {\n              id: new Date().getTime(),\n              level: 'ERROR',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: true,\n              summary: undefined,\n              error: true,\n              importType: type\n            };\n          } else {\n            // success\n            entry = {\n              id: id,\n              level: 'INFO',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: false,\n              events: [msg],\n              summary: undefined,\n              error: false,\n              importType: type\n            };\n          }\n\n          addEntry(entry.id, entry);\n\n          if (error) {\n            reject(errF(msg && msg.text));\n          }\n\n          setProgress(0);\n          resolve({});\n        },\n        onError: ev => {\n          let message;\n\n          try {\n            const response = JSON.parse(ev.target.response);\n            message = response.message;\n          } catch (e2) {\n            message = genericErrorMessage;\n          }\n\n          console.error('sendFile error', message);\n          reject(errF(message));\n        },\n        setProgress,\n        format\n      });\n      xhr.send(file);\n    } catch (e) {\n      // xhr.send can throw an exception\n      reject(errorGenerator(e));\n    }\n  });\n}; // call stub function if available\n\n\nconst locationAssign = url => {\n  if (window.locationAssign) {\n    window.locationAssign(url);\n  } else {\n    window.location = url;\n  }\n};\n\nconst getPrevJobDetails = (query, tasks) => {\n  if (!query || !query.id) return {};\n  const job = tasks[query.id];\n  if (!job) return {};\n  return job.jobDetails;\n};\n\nexport { createBlob, downloadBlob, fetchAttributes, getPrevJobDetails, locationAssign, jsDateToISO8601, jsDateToString, pathToId, trimString, uploadFile };","import PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nconst formatOptions = [{\n  value: 'json',\n  label: i18n.t('JSON')\n}, {\n  value: 'csv',\n  label: i18n.t('CSV')\n}, {\n  value: 'xml',\n  label: i18n.t('XML')\n}];\nconst formatNoCsvOptions = formatOptions.filter(f => f.value != 'csv');\nconst formatAdxOptions = [...formatOptions, {\n  value: 'adx',\n  label: i18n.t('ADX')\n}];\nconst formatAdxPdfOptions = [...formatAdxOptions, {\n  value: 'pdf',\n  label: i18n.t('PDF')\n}];\nconst formatJsonpOptions = [...formatOptions, {\n  value: 'jsonp',\n  label: i18n.t('JSONP')\n}];\nconst compressionOptions = [{\n  value: 'zip',\n  label: i18n.t('Zip')\n}, {\n  value: 'gz',\n  label: i18n.t('GZip')\n}, {\n  value: '',\n  label: i18n.t('Uncompressed')\n}];\nconst objectTypeOptions = [{\n  value: 'dataSets',\n  label: i18n.t('Data sets')\n}, {\n  value: 'programs',\n  label: i18n.t('Programs')\n}, {\n  value: 'categoryCombos',\n  label: i18n.t('Category combination')\n}, {\n  value: 'dashboards',\n  label: i18n.t('Dashboard')\n}, {\n  value: 'dataElementGroups',\n  label: i18n.t('Data element groups')\n}, {\n  value: 'optionSets',\n  label: i18n.t('Option sets')\n}];\nconst dataElementIdSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'NAME',\n  label: i18n.t('Name')\n}];\nconst orgUnitIdSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'NAME',\n  label: i18n.t('Name')\n}];\nconst idSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}];\nconst eventIdSchemeOptions = [...idSchemeOptions];\nconst inclusionOptions = [{\n  value: 'SELECTED',\n  label: i18n.t('Selected organisation unit')\n}, {\n  value: 'CHILDREN',\n  label: i18n.t('Include children of organisation unit')\n}, {\n  value: 'DESCENDANTS',\n  label: i18n.t('Include descendants of organisation unit')\n}];\nconst skipExisitingCheckOptions = [{\n  value: 'true',\n  label: i18n.t('Skip check'),\n  help: 'fast'\n}, {\n  value: 'false',\n  label: i18n.t('Check'),\n  help: 'safe, recommended'\n}];\nconst strategyOptions = [{\n  value: 'NEW_AND_UPDATES',\n  label: i18n.t('New and updates')\n}, {\n  value: 'NEW',\n  label: i18n.t('New only')\n}, {\n  value: 'UPDATES',\n  label: i18n.t('Updates only')\n}, {\n  value: 'DELETE',\n  label: i18n.t('Delete')\n}];\nconst importStrategyOptions = [{\n  value: 'CREATE_AND_UPDATE',\n  label: i18n.t('New and updates')\n}, {\n  value: 'CREATE',\n  label: i18n.t('New only')\n}, {\n  value: 'UPDATES',\n  label: i18n.t('Updates only')\n}, {\n  value: 'DELETE',\n  label: i18n.t('Delete')\n}];\nconst identifierOptions = [{\n  value: 'UID',\n  label: i18n.t('UID')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'AUTO',\n  label: i18n.t('Auto')\n}];\nconst importReportModeOptions = [{\n  value: 'ERRORS',\n  label: i18n.t('Errors')\n}, {\n  value: 'FULL',\n  label: i18n.t('Full')\n}, {\n  value: 'DEBUG',\n  label: i18n.t('Debug')\n}];\nconst preheatModeOptions = [{\n  value: 'REFERENCE',\n  label: i18n.t('Reference')\n}, {\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'NONE',\n  label: i18n.t('None')\n}];\nconst atomicModeOptions = [{\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'NONE',\n  label: i18n.t('None')\n}];\nconst mergeModeOptions = [{\n  value: 'MERGE',\n  label: i18n.t('Merge')\n}, {\n  value: 'REPLACE',\n  label: i18n.t('Replace')\n}];\nconst flushModeOptions = [{\n  value: 'AUTO',\n  label: i18n.t('Auto')\n}, {\n  value: 'OBJECT',\n  label: i18n.t('Object')\n}];\nconst inclusionStrategyOptions = [{\n  value: 'NON_NULL',\n  label: i18n.t('Non Null')\n}, {\n  value: 'ALWAYS',\n  label: i18n.t('Always')\n}, {\n  value: 'NON_EMPTY',\n  label: i18n.t('Non Empty')\n}];\nconst orgUnitSelectionModeOptions = [{\n  value: 'SELECTED',\n  label: i18n.t('Selected organisation units')\n}, {\n  value: 'CHILDREN',\n  label: i18n.t('Include children of selected organisation units')\n}, {\n  value: 'DESCENDANTS',\n  label: i18n.t('Include descendants of selected organisation unit')\n}, {\n  value: 'ACCESSIBLE',\n  label: i18n.t('Data view organisation units associated with the current user')\n}, {\n  value: 'CAPTURE',\n  label: i18n.t('Data capture organisation units associated with the current user')\n}, {\n  value: 'ALL',\n  label: i18n.t('All organisation units in the system')\n}];\nconst teiTypeFilterOptions = [{\n  value: 'NONE',\n  label: i18n.t('None')\n}, {\n  value: 'PROGRAM',\n  label: i18n.t('Program')\n}, {\n  value: 'TE',\n  label: i18n.t('Tracked entity')\n}];\nconst programStatusOptions = [{\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'ACTIVE',\n  label: i18n.t('Active')\n}, {\n  value: 'COMPLETED',\n  label: i18n.t('Completed')\n}, {\n  value: 'CANCELLED',\n  label: i18n.t('Cancelled')\n}];\nconst followUpStatusOptions = [{\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'TRUE',\n  label: i18n.t('True')\n}, {\n  value: 'FALSE',\n  label: i18n.t('False')\n}];\nconst lastUpdatedFilterOptions = [{\n  value: 'NONE',\n  label: i18n.t('None')\n}, {\n  value: 'DATE',\n  label: i18n.t('Start and end date')\n}, {\n  value: 'DURATION',\n  label: i18n.t('Duration')\n}];\nconst assignedUserModeOptions = [{\n  value: 'ANY',\n  label: i18n.t('Any')\n}, {\n  value: 'CURRENT',\n  label: i18n.t('Current')\n}, {\n  value: 'NONE',\n  label: i18n.t('None')\n}, {\n  value: 'PROVIDED',\n  label: i18n.t('Provided')\n}];\nconst defaultFormatOption = formatOptions[0];\nconst defaultCompressionOption = compressionOptions[0];\nconst defaultObjectTypeOption = objectTypeOptions[0];\nconst defaultDataElementIdSchemeOption = dataElementIdSchemeOptions[0];\nconst defaultOrgUnitIdSchemeOption = orgUnitIdSchemeOptions[0];\nconst defaultIdSchemeOption = idSchemeOptions[0];\nconst defaultEventIdSchemeOption = eventIdSchemeOptions[0];\nconst defaultInclusionOption = inclusionOptions[0];\nconst defaultSkipExisitingCheckOption = skipExisitingCheckOptions[0];\nconst defaultStrategyOption = strategyOptions[0];\nconst defaultIdentifierOption = identifierOptions[0];\nconst defaultImportReportModeOption = importReportModeOptions[0];\nconst defaultPreheatModeOption = preheatModeOptions[0];\nconst defaultImportStrategyOption = importStrategyOptions[0];\nconst defaultAtomicModeOption = atomicModeOptions[0];\nconst defaultMergeModeOption = mergeModeOptions[0];\nconst defaultFlushModeOption = flushModeOptions[0];\nconst defaultInclusionStrategyOption = inclusionStrategyOptions[0];\nconst defaultOrgUnitSelectionModeOption = orgUnitSelectionModeOptions[0];\nconst defaultTEITypeFilterOption = teiTypeFilterOptions[0];\nconst defaultProgramStatusOption = programStatusOptions[0];\nconst defaultFollowUpStatusOption = followUpStatusOptions[0];\nconst defaultLastUpdatedFilterOption = lastUpdatedFilterOptions[0];\nconst defaultAssignedUserModeOption = assignedUserModeOptions[0];\nconst optionPropType = PropTypes.exact({\n  value: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired\n});\nconst optionsPropType = PropTypes.arrayOf(optionPropType);\nexport { formatOptions, formatNoCsvOptions, formatAdxOptions, formatAdxPdfOptions, formatJsonpOptions, compressionOptions, objectTypeOptions, dataElementIdSchemeOptions, orgUnitIdSchemeOptions, idSchemeOptions, eventIdSchemeOptions, inclusionOptions, skipExisitingCheckOptions, strategyOptions, identifierOptions, importReportModeOptions, preheatModeOptions, importStrategyOptions, atomicModeOptions, mergeModeOptions, flushModeOptions, inclusionStrategyOptions, orgUnitSelectionModeOptions, teiTypeFilterOptions, programStatusOptions, followUpStatusOptions, lastUpdatedFilterOptions, assignedUserModeOptions, defaultFormatOption, defaultCompressionOption, defaultObjectTypeOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultIdSchemeOption, defaultEventIdSchemeOption, defaultInclusionOption, defaultSkipExisitingCheckOption, defaultStrategyOption, defaultIdentifierOption, defaultImportReportModeOption, defaultPreheatModeOption, defaultImportStrategyOption, defaultAtomicModeOption, defaultMergeModeOption, defaultFlushModeOption, defaultInclusionStrategyOption, defaultOrgUnitSelectionModeOption, defaultTEITypeFilterOption, defaultProgramStatusOption, defaultFollowUpStatusOption, defaultLastUpdatedFilterOption, defaultAssignedUserModeOption, optionPropType, optionsPropType };","import React, { useEffect, useState } from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { fetchAttributes } from '../../utils/helper';\nimport { dataElementIdSchemeOptions } from '../../utils/options';\nimport { SelectField } from '../';\n\nconst DataElementIdScheme = ({\n  name,\n  label,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    fetchAttributes(`${baseUrl}/api/`, 'dataElementAttribute').then(attributes => setSchemes(attributes)).catch(error => setError(error));\n    setLoading(false);\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional data element ID schemes')} : ${error.message}`;\n  const options = [...dataElementIdSchemeOptions, ...schemes];\n  return <SelectField name={name} label={label} options={options} dataTest={dataTest} loading={loading} validationText={validationText} error={!!error} dense />;\n};\n\nDataElementIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { DataElementIdScheme };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Help } from '@dhis2/ui-core';\nimport { FormField, SelectableList } from '../';\nconst dataSetQuery = {\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\n\nconst DataSetPicker = ({\n  label,\n  selected,\n  setSelected,\n  meta,\n  multiSelect = true,\n  withFilter = true,\n  withActions = true,\n  dataTest\n}) => {\n  const [list, setList] = useState([]);\n  const [error, setError] = useState(undefined);\n  const {\n    loading\n  } = useDataQuery(dataSetQuery, {\n    onComplete: data => {\n      const dataSets = data.dataSets.dataSets;\n      const list = dataSets.map(({\n        id,\n        displayName\n      }) => ({\n        value: id,\n        label: displayName\n      }));\n      setList(list);\n    },\n    onError: error => {\n      setError(error);\n      console.error('DataSetPicker error: ', error);\n    }\n  });\n  const showList = !loading && !error;\n  return <FormField label={label} dataTest={dataTest}>\n            {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n            {error && <div data-test={`${dataTest}-error`}>\n                    <p>\n                        {i18n.t('Something went wrong when loading the data sets!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showList && <SelectableList name=\"dataSetPicker\" label={i18n.t('Filter data sets by name')} selected={selected} setSelected={setSelected} multiSelect={multiSelect} list={list} withFilter={withFilter} withActions={withActions} dataTest={`${dataTest}-list`} />}\n            {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n        </FormField>;\n};\n\nDataSetPicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  multiSelect: PropTypes.bool,\n  withActions: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { DataSetPicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { DataSetPicker } from '../';\n\nconst SINGLE_DATASET_VALIDATOR = selectedDataSets => selectedDataSets.length == 0 ? i18n.t('At least one data set must be selected') : undefined;\n\nconst SINGLE_EXACT_DATASET_VALIDATOR = selectedDataSets => selectedDataSets.length != 1 ? i18n.t('One data set must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => <DataSetPicker meta={meta} selected={value} setSelected={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst DataSetPickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nDataSetPickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { DataSetPickerField, SINGLE_DATASET_VALIDATOR, SINGLE_EXACT_DATASET_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { InputField } from '@dhis2/ui-core';\nimport { jsDateToISO8601 } from '../../utils/helper';\nimport { FormField } from '../';\n\nconst DatePicker = ({\n  name,\n  error,\n  label,\n  date,\n  onChange,\n  dataTest,\n  required = true\n}) => {\n  const onChangeHelper = ({\n    value\n  }) => {\n    if (value == '') {\n      onChange(value);\n    } else {\n      onChange(new Date(value));\n    }\n  };\n\n  const value = date && jsDateToISO8601(date);\n  return <FormField label={label} dataTest={dataTest}>\n            <InputField type=\"date\" name={name} value={value} onChange={onChangeHelper} required={required} inputWidth=\"200px\" error={!!error} validationText={error} />\n        </FormField>;\n};\n\nDatePicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  date: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]).isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  error: PropTypes.string,\n  required: PropTypes.bool\n};\nexport { DatePicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { DatePicker } from '../';\n\nconst OPTIONAL_DATE_VALIDATOR = date => date ? DATE_VALIDATOR(date) : undefined;\n\nconst DATE_VALIDATOR = date => new Date(date) == 'Invalid Date' ? i18n.t('Invalid date') : undefined;\n\nconst DATE_BEFORE_VALIDATOR = (date1, date2) => date1 > date2 ? i18n.t('Start date must be before end date') : undefined;\n\nconst DATE_AFTER_VALIDATOR = (date2, date1) => date2 < date1 ? i18n.t('End date must be after start date') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  ...rest\n}) => <DatePicker name={inputName} error={error} date={value} onChange={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]),\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst DatePickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} inputName={name} {...rest} />;\n};\n\nDatePickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { DatePickerField, DATE_VALIDATOR, DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR, OPTIONAL_DATE_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { SelectField } from '../';\nimport { eventIdSchemeOptions } from '../../utils/options';\n\nconst EventIdScheme = ({\n  name,\n  label,\n  dataTest\n}) => {\n  return <SelectField name={name} label={label} options={eventIdSchemeOptions} dense dataTest={dataTest} />;\n};\n\nEventIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { EventIdScheme };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { Field, FileInput } from '@dhis2/ui-forms';\nimport { FormField } from '../';\n\nconst SINGLE_FILE_VALIDATOR = files => !files || files.length == 0 ? i18n.t('Please select a file') : undefined;\n\nconst FileUpload = ({\n  initialValue,\n  required,\n  name,\n  label,\n  accept = '*',\n  validator,\n  dataTest\n}) => {\n  return <FormField label={label} required={required} dataTest={dataTest}>\n            <Field component={FileInput} name={name} accept={accept} required={required} initialValue={initialValue} validate={validator} dataTest={`${dataTest}-fileinput`} />\n        </FormField>;\n};\n\nFileUpload.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  accept: PropTypes.string,\n  initialValue: PropTypes.instanceOf(File),\n  required: PropTypes.bool,\n  validator: PropTypes.func\n};\nexport { FileUpload, SINGLE_FILE_VALIDATOR };","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { AlertBar } from '@dhis2/ui-core';\nimport styles from './FormAlerts.module.css';\n\nconst FormAlerts = ({\n  alerts,\n  dataTest\n}) => {\n  const [bars, setBars] = useState([]);\n  useEffect(() => {\n    if (alerts) {\n      const newBars = alerts.map(a => <AlertBar key={`alert-${a.id}`} warning={a.warning} info={a.info} critical={a.critical} success={a.success} duration={8000}>\n                    {a.message}\n                </AlertBar>);\n      setBars(newBars);\n    }\n  }, [alerts]);\n  if (bars.length == 0) return null;\n  return <div className={styles.container} data-test={dataTest}>\n            {bars}\n        </div>;\n};\n\nFormAlerts.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  alerts: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    message: PropTypes.string.isRequired,\n    critical: PropTypes.bool,\n    info: PropTypes.bool,\n    warning: PropTypes.bool\n  }))\n};\nexport { FormAlerts };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './FormField.module.css';\n\nconst FormField = ({\n  dataTest,\n  label,\n  required = false,\n  children\n}) => {\n  return <div className={styles.container} data-test={dataTest}>\n            <span className={styles.label}>\n                {label}\n                {required && <span> *</span>}\n            </span>\n            {children}\n        </div>;\n};\n\nFormField.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  required: PropTypes.bool\n};\nexport { FormField };","import React, { useState, useEffect } from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { fetchAttributes } from '../../utils/helper';\nimport { idSchemeOptions } from '../../utils/options';\nimport { SelectField } from '../';\n\nconst attributeFoundIn = (attribute, collection) => !!collection.find(({\n  value\n}) => value === attribute.value);\n\nconst IdScheme = ({\n  name,\n  label,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    const f = async () => {\n      let err;\n      const dataElementAttributes = await fetchAttributes(`${baseUrl}/api/`, 'dataElementAttribute').catch(error => err = error);\n      const organisationUnitAttributes = await fetchAttributes(`${baseUrl}/api/`, 'organisationUnitAttribute').catch(error => err = error);\n      setError(err);\n\n      if (!err) {\n        const sharedAttributes = dataElementAttributes.reduce((shared, attribute) => {\n          const foundInOrgUnits = attributeFoundIn(attribute, organisationUnitAttributes);\n          return foundInOrgUnits ? [...shared, attribute] : shared;\n        }, []);\n        setSchemes(sharedAttributes);\n      }\n\n      setLoading(false);\n    };\n\n    f();\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional ID schemes')} : ${error.message}`;\n  const options = [...idSchemeOptions, ...schemes];\n  return <SelectField name={name} label={label} options={options} dataTest={dataTest} loading={loading} validationText={validationText} error={!!error} dense />;\n};\n\nIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { IdScheme };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, Help } from '@dhis2/ui-core';\nimport styles from './ImportButtonStrip.module.css';\nconst DRYRUN_HELPTEXT = i18n.t('Will do a test run without importing any data into the database');\n\nconst ImportButtonStrip = ({\n  dryRunDataTest,\n  importDataTest,\n  form,\n  dataTest\n}) => {\n  return <div data-test={dataTest}>\n            <ButtonStrip dataTest={`${dataTest}-button-strip`}>\n                <Button primary type=\"submit\" onClick={() => form.change('dryRun', true)} dataTest={dryRunDataTest} className={styles.dryRun}>\n                    {i18n.t('Dry run')}\n                </Button>\n                <Button secondary type=\"submit\" onClick={() => form.change('dryRun', false)} dataTest={importDataTest}>\n                    {i18n.t('Import')}\n                </Button>\n            </ButtonStrip>\n            <Help dataTest={`${dataTest}-help`}>{`${i18n.t('Dry run')}: ${DRYRUN_HELPTEXT}`}</Help>\n        </div>;\n};\n\nImportButtonStrip.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  dryRunDataTest: PropTypes.string.isRequired,\n  form: PropTypes.object.isRequired,\n  importDataTest: PropTypes.string.isRequired\n};\nexport { ImportButtonStrip };","import { categoryTypes } from '../../utils/tasks';\nconst categoryTypesObj = categoryTypes.reduce((acc, cur) => {\n  acc[cur.importType] = cur;\n  return acc;\n}, {});\n\nconst jobToPath = job => ({\n  pathname: `/import/${categoryTypesObj[job.importType].key}`,\n  query: {\n    id: job.id\n  }\n});\n\nexport { categoryTypesObj, jobToPath };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport styles from './MenuLabel.module.css';\nimport { jsDateToString, trimString } from '../../../utils/helper';\n\nconst MenuLabel = ({\n  task\n}) => {\n  return <div className={styles.container} data-test={`job-overview-menu-label-${task.id}`}>\n            <div className={styles.status}>\n                <span>{trimString(15, task.jobDetails.files[0].name)}</span>\n                <br />\n                <span>\n                    {task.completed ? i18n.t('Completed') : i18n.t('In progress')}{' '}\n                </span>\n            </div>\n            <div className={styles.date}>{jsDateToString(task.created)}</div>\n        </div>;\n};\n\nMenuLabel.propTypes = {\n  task: PropTypes.shape({\n    completed: PropTypes.bool.isRequired,\n    created: PropTypes.instanceOf(Date).isRequired,\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    jobDetails: PropTypes.object.isRequired\n  }).isRequired\n};\nexport { MenuLabel };","import React, { useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Chip, Menu, MenuItem } from '@dhis2/ui-core';\nimport styles from './JobOverview.module.css';\nimport { TaskContext } from '../../contexts/';\nimport { categoryTypes } from '../../utils/tasks';\nimport { JobSummary } from '../';\nimport { categoryTypesObj, jobToPath } from './helper';\nimport { MenuLabel } from './MenuLabel/MenuLabel';\n\nconst JobOverview = ({\n  activeTypes,\n  setActiveTypes,\n  selectedJob,\n  setSelectedJob\n}) => {\n  const {\n    tasks\n  } = useContext(TaskContext);\n\n  const onChipClick = key => {\n    if (activeTypes.includes(key)) {\n      setActiveTypes([...activeTypes].filter(k => k != key));\n    } else {\n      setActiveTypes([...activeTypes, key]);\n    }\n  }; // all tasks sorted by type, createdAt (descending)\n\n\n  const allTasks = categoryTypes.map(({\n    key: type\n  }) => Object.keys(tasks[type]).map(id => tasks[type][id])).flat().sort((a, b) => {\n    if (a.importType > b.importType) return -1;\n    if (a.createdAt > b.createdAt) return -1;\n  });\n  const filteredTasks = allTasks.filter(t => activeTypes.includes(t.importType)); // set selected job to first job if\n  // first time user visits the job overview page\n\n  useEffect(() => {\n    if (!selectedJob && allTasks.length > 0) {\n      setSelectedJob(allTasks[0]);\n    }\n  }, []);\n\n  if (!selectedJob) {\n    return <p>{i18n.t('No jobs started yet.')}</p>;\n  }\n\n  return <div className={styles.container} data-test=\"job-overview-container\">\n            <div className={styles.items} data-test=\"job-overview-tasks\">\n                <Menu className={styles.Menu}>\n                    <div className={styles.chips} data-test=\"job-overview-chips\">\n                        {categoryTypes.map(({\n            key,\n            importType,\n            label\n          }) => <Chip onClick={() => onChipClick(importType)} selected={activeTypes.includes(importType)} key={key} dataTest={`job-overview-chips-${key}`}>\n                                {label}\n                            </Chip>)}\n                    </div>\n                    {filteredTasks.map(t => <MenuItem key={`job-overview-tasks-${t.id}`} active={selectedJob.id == t.id} label={<MenuLabel task={t} />} onClick={() => setSelectedJob(t)} icon={categoryTypesObj[t.importType].icon} />)}\n                </Menu>\n            </div>\n            <div className={styles.summary} data-test=\"job-overview-summary\">\n                <JobSummary task={selectedJob} dataTest=\"job-summary-container\" showFileDetails={false} showJobDetails={true} />\n                <Link to={jobToPath(selectedJob)}>\n                    <Button primary>{i18n.t('Recreate job')}</Button>\n                </Link>\n            </div>\n        </div>;\n};\n\nJobOverview.propTypes = {\n  activeTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setActiveTypes: PropTypes.func.isRequired,\n  setSelectedJob: PropTypes.func.isRequired,\n  selectedJob: PropTypes.object\n};\nexport { JobOverview, categoryTypes };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\nimport { jsDateToString } from '../../../utils/helper';\nimport { FormField } from '../../';\n\nconst Events = ({\n  events\n}) => {\n  return <FormField label={`${i18n.t('Events')}`} dataTest=\"job-summary-events\" name=\"events\">\n            <Table>\n                <TableHead>\n                    <TableRowHead>\n                        <TableCellHead>{i18n.t('Time')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Message')}</TableCellHead>\n                        <TableCellHead>{i18n.t('ID')}</TableCellHead>\n                    </TableRowHead>\n                </TableHead>\n                <TableBody>\n                    {events.map(e => <TableRow key={`job-summary-events-${e.id}`}>\n                            <TableCell>{jsDateToString(e.date)}</TableCell>\n                            <TableCell>{e.text}</TableCell>\n                            <TableCell>{e.id}</TableCell>\n                        </TableRow>)}\n                </TableBody>\n            </Table>\n        </FormField>;\n};\n\nconst eventPropType = PropTypes.shape({\n  date: PropTypes.instanceOf(Date).isRequired,\n  id: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired\n});\nEvents.propTypes = {\n  events: PropTypes.arrayOf(eventPropType).isRequired\n};\nexport { Events };","import PropTypes from 'prop-types';\nconst statsPropTypeObj = {\n  deleted: PropTypes.number.isRequired,\n  ignored: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n  updated: PropTypes.number.isRequired,\n  imported: PropTypes.number,\n  created: PropTypes.number\n};\nconst statsPropType = PropTypes.exact(statsPropTypeObj);\n\nconst getClassName = c => {\n  const s = c.split('.');\n  return s[s.length - 1];\n};\n\nconst typeReportParse = report => {\n  let allStats = [];\n  const allMessages = [];\n  Object.keys(report).forEach(i => {\n    const {\n      klass,\n      objectReports,\n      stats\n    } = report[i];\n    allStats = [...allStats, { ...stats,\n      type: getClassName(klass)\n    }];\n    objectReports && objectReports.forEach(r => {\n      const {\n        uid,\n        errorReports\n      } = r;\n      errorReports && errorReports.forEach(e => {\n        allMessages.push({\n          uid,\n          type: getClassName(e.mainKlass),\n          property: e.errorProperty,\n          message: e.message\n        });\n      });\n    });\n  });\n  return {\n    stats: allStats,\n    messages: allMessages\n  };\n};\n\nconst messagesPropType = PropTypes.arrayOf(PropTypes.exact({\n  uid: PropTypes.string,\n  type: PropTypes.string,\n  property: PropTypes.string,\n  message: PropTypes.string\n}));\nexport { typeReportParse, statsPropType, statsPropTypeObj, messagesPropType };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\n\nconst SingleStatusTable = ({\n  status,\n  description\n}) => <Table>\n        <TableHead>\n            <TableRowHead>\n                <TableCellHead>{i18n.t('Status')}</TableCellHead>\n                <TableCellHead>{i18n.t('Description')}</TableCellHead>\n            </TableRowHead>\n        </TableHead>\n        <TableBody>\n            <TableRow>\n                <TableCell>{status}</TableCell>\n                <TableCell>{description}</TableCell>\n            </TableRow>\n        </TableBody>\n    </Table>;\n\nSingleStatusTable.propTypes = {\n  description: PropTypes.string,\n  status: PropTypes.string\n};\nexport { SingleStatusTable };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\nimport { statsPropType } from '../helper';\nimport { SingleStatusTable } from '../SingleStatusTable/SingleStatusTable';\nimport { FormField } from '../../';\n\nconst SingleSummary = ({\n  importCount,\n  status,\n  description,\n  conflicts,\n  id\n}) => <div>\n        <FormField label={`${i18n.t('Summary')} #${id}`} dataTest=\"job-summary-single-summary\" name=\"summary\">\n            <>\n                {status && <SingleStatusTable description={description} status={status} />}\n                <Table>\n                    <TableHead>\n                        <TableRowHead>\n                            <TableCellHead>{i18n.t('Created')}</TableCellHead>\n                            <TableCellHead>{i18n.t('Deleted')}</TableCellHead>\n                            <TableCellHead>{i18n.t('Ignored')}</TableCellHead>\n                            <TableCellHead>{i18n.t('Updated')}</TableCellHead>\n                            <TableCellHead>{i18n.t('Total')}</TableCellHead>\n                        </TableRowHead>\n                    </TableHead>\n                    <TableBody>\n                        <TableRow>\n                            <TableCell>{importCount.imported}</TableCell>\n                            <TableCell>{importCount.deleted}</TableCell>\n                            <TableCell>{importCount.ignored}</TableCell>\n                            <TableCell>{importCount.updated}</TableCell>\n                            <TableCell>{importCount.total}</TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </>\n        </FormField>\n        {conflicts && <FormField label={`${i18n.t('Conflicts')}`} dataTest=\"job-summary-conflicts\" name=\"conflicts\">\n                <Table>\n                    <TableHead>\n                        <TableRowHead>\n                            <TableCellHead>{i18n.t('Object')}</TableCellHead>\n                            <TableCellHead>{i18n.t('Value')}</TableCellHead>\n                        </TableRowHead>\n                    </TableHead>\n                    <TableBody>\n                        {conflicts.map((c, i) => <TableRow key={`job-summary-conflicts-${c.object}-${i}`}>\n                                <TableCell>{c.object}</TableCell>\n                                <TableCell>{c.value}</TableCell>\n                            </TableRow>)}\n                    </TableBody>\n                </Table>\n            </FormField>}\n    </div>;\n\nSingleSummary.propTypes = {\n  id: PropTypes.string.isRequired,\n  importCount: statsPropType.isRequired,\n  conflicts: PropTypes.arrayOf(PropTypes.exact({\n    object: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired\n  })),\n  description: PropTypes.string,\n  status: PropTypes.string\n};\nexport { SingleSummary };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\nimport { statsPropTypeObj } from '../helper';\nimport { FormField } from '../../';\n\nconst TypeCount = ({\n  stats\n}) => {\n  if (stats.length == 0) return null;\n  return <FormField label={`${i18n.t('Type count')}`} dataTest=\"job-summary-type-count\" name=\"typeCount\">\n            <Table>\n                <TableHead>\n                    <TableRowHead>\n                        <TableCellHead>{i18n.t('Type')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Created')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Deleted')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Ignored')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Updated')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Total')}</TableCellHead>\n                    </TableRowHead>\n                </TableHead>\n                <TableBody>\n                    {stats.map((s, i) => <TableRow key={`job-summary-type-count-${i}`}>\n                            <TableCell>{s.type}</TableCell>\n                            <TableCell>{s.created}</TableCell>\n                            <TableCell>{s.deleted}</TableCell>\n                            <TableCell>{s.ignored}</TableCell>\n                            <TableCell>{s.updated}</TableCell>\n                            <TableCell>{s.total}</TableCell>\n                        </TableRow>)}\n                </TableBody>\n            </Table>\n        </FormField>;\n};\n\nconst typeCountStatsPropTypeObj = { ...statsPropTypeObj,\n  type: PropTypes.string.isRequired\n};\nTypeCount.propTypes = {\n  stats: PropTypes.arrayOf(PropTypes.shape(typeCountStatsPropTypeObj)).isRequired\n};\nexport { TypeCount, typeCountStatsPropTypeObj };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\nimport { FormField } from '../../';\nimport { messagesPropType } from '../helper';\n\nconst Messages = ({\n  messages\n}) => {\n  if (messages.length == 0) return null;\n  return <FormField label={`${i18n.t('Messages')}`} dataTest=\"job-summary-messages\" name=\"messages\">\n            <Table>\n                <TableHead>\n                    <TableRowHead>\n                        <TableCellHead>{i18n.t('UID')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Type')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Property')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Message')}</TableCellHead>\n                    </TableRowHead>\n                </TableHead>\n                <TableBody>\n                    {messages.map((m, i) => <TableRow key={`job-summary-messages-${i}`}>\n                            <TableCell>{m.uid}</TableCell>\n                            <TableCell>{m.type}</TableCell>\n                            <TableCell>{m.property}</TableCell>\n                            <TableCell>{m.message}</TableCell>\n                        </TableRow>)}\n                </TableBody>\n            </Table>\n        </FormField>;\n};\n\nMessages.propTypes = {\n  messages: messagesPropType.isRequired\n};\nexport { Messages, messagesPropType };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { statsPropType, messagesPropType } from '../helper';\nimport { SingleSummary } from '../SingleSummary/SingleSummary';\nimport { TypeCount, typeCountStatsPropTypeObj } from '../TypeCount/TypeCount';\nimport { Messages } from '../Messages/Messages';\n\nconst TypeReportSummary = ({\n  overviewStats,\n  stats,\n  messages\n}) => {\n  return <div>\n            <SingleSummary importCount={overviewStats} id={i18n.t('Overview')} />\n            <TypeCount stats={stats} />\n            <Messages messages={messages} />\n        </div>;\n};\n\nTypeReportSummary.propTypes = {\n  messages: messagesPropType.isRequired,\n  overviewStats: statsPropType.isRequired,\n  stats: PropTypes.arrayOf(PropTypes.exact(typeCountStatsPropTypeObj)).isRequired\n};\nexport { TypeReportSummary };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport styles from './Summary.module.css';\nimport { typeReportParse } from '../helper';\nimport { SingleSummary } from '../SingleSummary/SingleSummary';\nimport { TypeReportSummary } from '../TypeReportSummary/TypeReportSummary';\n\nconst extractStats = summary => {\n  if (summary.responseType == 'ImportSummaries') {\n    const {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    } = summary;\n    return {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    };\n  } else if (summary.importCount) {\n    const {\n      imported,\n      deleted,\n      ignored,\n      updated\n    } = summary.importCount;\n    const total = imported + deleted + ignored + updated;\n    return {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    };\n  } else if (summary.stats) {\n    const {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    } = summary.stats;\n    return {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    };\n  }\n};\n\nconst Summary = ({\n  summary\n}) => {\n  // gml import type object return\n  if (summary.typeReports) {\n    const overviewStats = { ...summary.stats,\n      imported: summary.stats.created\n    };\n    const {\n      stats,\n      messages\n    } = typeReportParse(summary.typeReports);\n    return <div data-test=\"job-summary-summary\">\n                <TypeReportSummary overviewStats={overviewStats} stats={stats} messages={messages} />\n            </div>;\n  }\n\n  const importCount = extractStats(summary);\n  const overviewSummary = <SingleSummary importCount={importCount} status={summary.status} description={summary.description} conflicts={summary.conflicts} id={i18n.t('Overview')} />;\n  const allSummaries = summary.responseType == 'ImportSummaries' && summary.importSummaries ? summary.importSummaries.map((s, i) => {\n    const importCount = extractStats(s);\n    return <SingleSummary key={`single-summary-${i}`} importCount={importCount} status={s.status} description={s.description} conflicts={s.conflicts} id={`${i + 1}`} />;\n  }) : null;\n  return <div data-test=\"job-summary-summary\">\n            {overviewSummary}\n            <div className={styles.rest} data-test=\"job-summary-summary-rest\">\n                {allSummaries}\n            </div>\n        </div>;\n};\n\nSummary.propTypes = {\n  summary: PropTypes.object.isRequired\n};\nexport { Summary };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui-core';\nimport { FormField } from '../../';\n\nconst valueToString = value => {\n  if (value instanceof File) {\n    return value.name;\n  } else if (Array.isArray(value)) {\n    return value.map(v => valueToString(v)).join(',');\n  } else if (value instanceof Object) {\n    return value.label;\n  }\n\n  return `${value}`;\n};\n\nconst Details = ({\n  details\n}) => {\n  return <FormField label={`${i18n.t('Job details')}`} dataTest=\"job-summary-job-details\" name=\"details\">\n            <Table>\n                <TableHead>\n                    <TableRowHead>\n                        <TableCellHead>{i18n.t('Key')}</TableCellHead>\n                        <TableCellHead>{i18n.t('Value')}</TableCellHead>\n                    </TableRowHead>\n                </TableHead>\n                <TableBody>\n                    {Object.keys(details).map(key => <TableRow key={`job-summary-job-details-${key}`}>\n                            <TableCell>{key}</TableCell>\n                            <TableCell>{valueToString(details[key])}</TableCell>\n                        </TableRow>)}\n                </TableBody>\n            </Table>\n        </FormField>;\n};\n\nDetails.propTypes = {\n  details: PropTypes.object.isRequired\n};\nexport { Details };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, Tag } from '@dhis2/ui-core';\nimport styles from './JobSummary.module.css';\nimport { jsDateToString } from '../../utils/helper';\nimport { Events } from './Events/Events';\nimport { Summary } from './Summary/Summary';\nimport { Details } from './Details/Details';\n\nconst Header = ({\n  jobDetails,\n  task,\n  showFileDetails\n}) => <div className={styles.header}>\n        <h3 className={styles.title}>{`${i18n.t('Job summary')}`}</h3>\n        {showFileDetails && <span className={styles.taskDetails}>\n                <span data-test=\"job-summary-filename\">\n                    {jobDetails.files[0].name}\n                </span>{' '}\n                -{' '}\n                <span data-test=\"job-summary-date\">\n                    {jsDateToString(task.created)}{' '}\n                </span>\n            </span>}\n    </div>;\n\nHeader.propTypes = {\n  jobDetails: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired,\n  showFileDetails: PropTypes.bool\n};\n\nconst Tags = ({\n  jobDetails,\n  task\n}) => <div className={styles.tags} data-test=\"job-summary-tags\">\n        {task.completed ? <Tag positive>{i18n.t('Completed')}</Tag> : <Tag neutral>{i18n.t('In progress')}</Tag>}\n        {task.error && <Tag negative bold>\n                {i18n.t('Error')}\n            </Tag>}\n        {task.summary && task.summary.conflicts && <Tag negative>{i18n.t('Conflicts')}</Tag>}\n        {jobDetails.dryRun && <Tag neutral bold>\n                {i18n.t('Dry run')}\n            </Tag>}\n    </div>;\n\nTags.propTypes = {\n  jobDetails: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired\n};\n\nconst JobSummary = ({\n  task,\n  showFileDetails = true,\n  showJobDetails = false,\n  dataTest\n}) => {\n  if (!task) return null;\n  const {\n    jobDetails\n  } = task;\n  return <div className={styles.container} data-test={dataTest}>\n            <Header jobDetails={jobDetails} task={task} showFileDetails={showFileDetails} />\n            <Tags jobDetails={jobDetails} task={task} />\n            <Divider />\n            {task.completed && task.summary && <Summary summary={task.summary} />}\n            <div className={styles.events}>\n                <Events events={task.events} />\n            </div>\n            {showJobDetails && <div className={styles.jobDetails}>\n                    <Details details={task.jobDetails} />\n                </div>}\n        </div>;\n};\n\nJobSummary.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  showFileDetails: PropTypes.bool,\n  showJobDetails: PropTypes.bool,\n  task: PropTypes.object\n};\nexport { JobSummary };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { JobSummary } from '../JobSummary';\nimport { MoreOptions } from '../../';\n\nconst MiniJobSummary = ({\n  task,\n  dataTest\n}) => {\n  if (!task) return null;\n  return <div data-test={dataTest}>\n            <MoreOptions label={i18n.t('View summary of recently started import job')} dataTest={`${dataTest}-MoreOptions`}>\n                <JobSummary task={task} dataTest={`${dataTest}-JobSummary`} />\n            </MoreOptions>\n        </div>;\n};\n\nMiniJobSummary.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  task: PropTypes.object\n};\nexport { MiniJobSummary };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { MinusIcon, PlusIcon } from '../';\nimport styles from './MoreOptions.module.css';\n\nconst MoreOptions = ({\n  children,\n  initiallyVisible = false,\n  label = i18n.t('more options'),\n  dataTest = 'interaction-more-options'\n}) => {\n  const [hidden, setHidden] = useState(!initiallyVisible);\n\n  const onToggle = () => {\n    setHidden(!hidden);\n  };\n\n  return <div className={styles.container} data-test={dataTest}>\n            <div className={styles.header} onClick={onToggle} data-test={`${dataTest}-header`}>\n                {hidden ? <PlusIcon /> : <MinusIcon />}\n                {label}\n            </div>\n            <div className={styles.children} data-test={`${dataTest}-children`}>\n                {!hidden && children}\n            </div>\n        </div>;\n};\n\nMoreOptions.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  dataTest: PropTypes.string,\n  initiallyVisible: PropTypes.bool,\n  label: PropTypes.string\n};\nexport { MoreOptions };","import React, { useEffect, useState } from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { fetchAttributes } from '../../utils/helper';\nimport { orgUnitIdSchemeOptions } from '../../utils/options';\nimport { SelectField } from '../';\n\nconst OrgUnitIdScheme = ({\n  name,\n  label,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    fetchAttributes(`${baseUrl}/api/`, 'organisationUnitAttribute').then(attributes => setSchemes(attributes)).catch(error => setError(error));\n    setLoading(false);\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional organisation unit ID schemes')} : ${error.message}`;\n  const options = [...orgUnitIdSchemeOptions, ...schemes];\n  return <SelectField name={name} label={label} options={options} dataTest={dataTest} loading={loading} validationText={validationText} error={!!error} dense />;\n};\n\nOrgUnitIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { OrgUnitIdScheme };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio, Checkbox, Node } from '@dhis2/ui-core';\n\nconst Tree = ({\n  list,\n  select,\n  selected,\n  multiSelect,\n  onOpen,\n  onClose,\n  dataTest\n}) => {\n  const view = () => node(list);\n\n  const node = (l, d = 0) => {\n    if (!Array.isArray(list)) {\n      return null;\n    }\n\n    return l.map(({\n      open,\n      label,\n      value,\n      children,\n      hasChildren\n    }) => {\n      const component = multiSelect ? <Checkbox name={value} value={value} label={label} checked={selected.includes(value)} onChange={() => select(value)} dataTest={`${dataTest}-${value}-select`} /> : <Radio name={value} value={value} label={label} checked={selected.includes(value)} onChange={() => select(value)} dataTest={`${dataTest}-${value}-select`} />;\n      return <Node key={`node-${value}`} open={open} label={label} component={component} value={value} onOpen={() => onOpen(value, children)} onClose={() => onClose(value, children)} dataTest={`${dataTest}-${value}`}>\n                    {hasChildren && children.length == 0 ? <span>placeholder</span> : null}\n                    {children ? node(children, d + 1) : null}\n                </Node>;\n    });\n  };\n\n  return list.length == 0 ? null : <div data-test={dataTest}>{view()}</div>;\n};\n\nconst listItemPropType = PropTypes.exact({\n  children: PropTypes.array.isRequired,\n  hasChildren: PropTypes.bool.isRequired,\n  id: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.string.isRequired\n}); //   80:5  error  Callback prop types must be listed after all other prop types  react/sort-prop-types\n\nTree.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  list: PropTypes.arrayOf(listItemPropType).isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onClose: PropTypes.func.isRequired,\n  // eslint-disable-next-line react/sort-prop-types\n  onOpen: PropTypes.func.isRequired,\n  select: PropTypes.func.isRequired,\n  multiSelect: PropTypes.bool\n};\nexport { Tree };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { CircularLoader, Help } from '@dhis2/ui-core';\nimport { pathToId } from '../../utils/helper';\nimport { FormField } from '../';\nimport { Tree } from './Tree/Tree';\nimport styles from './OrgUnitTree.module.css';\nconst rootQuery = {\n  roots: {\n    resource: 'organisationUnits',\n    params: {\n      filter: 'level:eq:1',\n      fields: 'id,path,displayName,children::isNotEmpty',\n      paging: 'false'\n    }\n  }\n};\nconst orgQuery = {\n  units: {\n    resource: 'organisationUnits',\n    id: ({\n      id\n    }) => `${id}`,\n    params: {\n      fields: 'children[id,displayName,path,children::isNotEmpty]',\n      paging: 'false'\n    }\n  }\n};\n\nconst OrgUnitTree = ({\n  label,\n  selected,\n  setSelected,\n  meta,\n  dataTest,\n  multiSelect = true\n}) => {\n  const [children, setChildren] = useState([]);\n  const [error, setError] = useState(undefined);\n  const {\n    loading,\n    engine\n  } = useDataQuery(rootQuery, {\n    onComplete: data => {\n      const roots = data.roots.organisationUnits;\n      const list = formatList(roots);\n      setChildren(list);\n    },\n    onError: error => {\n      setError(error);\n      console.error('OrgUnitTree error: ', error);\n    }\n  });\n\n  const formatList = list => {\n    return list.map(({\n      id,\n      path,\n      displayName,\n      children\n    }) => ({\n      open: false,\n      id: id,\n      value: path,\n      label: displayName,\n      children: [],\n      hasChildren: children\n    }));\n  };\n\n  const toggleOpenStatus = path => {\n    const hierarchy = path.split('/').filter(p => p.length != 0);\n    const newChildren = [...children];\n    let target = newChildren;\n    hierarchy.forEach(parent => {\n      target = target.find(el => el.id == parent);\n\n      if (target.value == path) {\n        target.open = !target.open;\n      } else {\n        target = target.children;\n      }\n    });\n    setChildren(newChildren);\n  };\n\n  const setChildrenFor = (path, ch) => {\n    const list = formatList(ch);\n    list.sort((a, b) => a.label.localeCompare(b.label));\n    const hierarchy = path.split('/').filter(p => p.length != 0);\n    const newChildren = [...children];\n    let target = newChildren;\n    hierarchy.forEach(parent => {\n      target = target.find(el => el.id == parent);\n\n      if (target.value == path) {\n        target.children = list;\n        target.open = true;\n      } else {\n        target = target.children;\n      }\n    });\n    setChildren(newChildren);\n  };\n\n  const onOpen = (path, ch) => {\n    if (ch.length == 0) {\n      const orgId = pathToId(path);\n      engine.query(orgQuery, {\n        variables: {\n          id: orgId\n        },\n        onComplete: data => {\n          setChildrenFor(path, data.units.children);\n        },\n        onError: error => {\n          setError(error);\n          console.error('OrgUnitTree onOpen error: ', error);\n        }\n      });\n    } else {\n      toggleOpenStatus(path);\n    }\n  };\n\n  const onClose = path => {\n    toggleOpenStatus(path);\n  };\n\n  const onSelect = path => {\n    if (multiSelect) {\n      const newValue = !selected.includes(path);\n\n      if (newValue == false) {\n        setSelected(selected.filter(p => p != path));\n      } else {\n        setSelected([...selected, path]);\n      }\n    } else {\n      setSelected([path]);\n    }\n  };\n\n  const showTree = !loading && !error;\n  return <FormField label={label} dataTest={dataTest}>\n            <div className={styles.container}>\n                {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n                {error && <div data-test={`${dataTest}-error`}>\n                        <p>\n                            {i18n.t('Something went wrong when loading the organisation units!')}\n                        </p>\n                        <p>{error.message}</p>\n                    </div>}\n                {showTree && <Tree selected={selected} select={onSelect} multiSelect={multiSelect} onOpen={onOpen} onClose={onClose} list={children} dataTest={`${dataTest}-tree`} />}\n                {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n            </div>\n        </FormField>;\n};\n\nOrgUnitTree.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  multiSelect: PropTypes.bool\n};\nexport { OrgUnitTree };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { OrgUnitTree } from './OrgUnitTree';\n\nconst SINGLE_ORG_VALIDATOR = selectedOrgUnits => selectedOrgUnits.length == 0 ? i18n.t('At least one organisation unit must be selected') : undefined;\n\nconst SINGLE_EXACT_ORG_VALIDATOR = selectedOrgUnits => selectedOrgUnits.length != 1 ? i18n.t('One organisation unit must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => <OrgUnitTree meta={meta} selected={value} setSelected={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst OrgUnitTreeField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nOrgUnitTreeField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { OrgUnitTreeField, SINGLE_ORG_VALIDATOR, SINGLE_EXACT_ORG_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, CircularLoader, ComponentCover, LinearLoader } from '@dhis2/ui-core';\nimport styles from './Page.module.css';\nimport { JobSummary, MiniJobSummary } from '../../components/';\n\nconst Page = ({\n  title,\n  desc,\n  icon,\n  summaryTask,\n  showFullSummaryTask = false,\n  children,\n  loading = false,\n  dataTest\n}) => {\n  const loadingEl = typeof loading == 'number' ? <LinearLoader amount={loading} /> : <CircularLoader />;\n  return <div className={styles.container} data-test={dataTest}>\n            <div className={styles.header}>\n                <span className={styles.iconAndTitle}>\n                    <span className={styles.icon}>{icon}</span>\n                    <span className={styles.title}>{title}</span>\n                </span>\n                <p className={styles.desc}>{desc}</p>\n            </div>\n            {summaryTask && <Card className={styles.preBody}>\n                    <div className={styles.content}>\n                        {showFullSummaryTask ? <JobSummary task={summaryTask} dataTest=\"job-summary-container\" /> : <MiniJobSummary task={summaryTask} dataTest=\"mini-job-summary-container\" />}\n                    </div>\n                </Card>}\n            <Card>\n                {!!loading && <ComponentCover>{loadingEl}</ComponentCover>}\n                <div className={styles.content}>{children}</div>\n            </Card>\n        </div>;\n};\n\nPage.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  dataTest: PropTypes.string.isRequired,\n  desc: PropTypes.string.isRequired,\n  icon: PropTypes.object.isRequired,\n  title: PropTypes.string.isRequired,\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  showFullSummaryTask: PropTypes.bool,\n  summaryTask: PropTypes.object\n};\nexport { Page };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Help } from '@dhis2/ui-core';\nimport { FormField, SelectableList } from '../';\nconst programQuery = {\n  programs: {\n    resource: 'programs',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\n\nconst ProgramPicker = ({\n  label,\n  selected,\n  setSelected,\n  meta,\n  dataTest,\n  multiSelect,\n  withFilter,\n  withActions,\n  autoSelectFirst\n}) => {\n  const [list, setList] = useState([]);\n  const {\n    error,\n    loading\n  } = useDataQuery(programQuery, {\n    onComplete: data => {\n      const programs = data.programs.programs;\n      const list = programs.map(({\n        id,\n        displayName\n      }) => ({\n        value: id,\n        label: displayName\n      }));\n      setList(list);\n\n      if (autoSelectFirst) {\n        setSelected([list[0].value]);\n      }\n    },\n    onError: error => {\n      console.error('ProgramPicker error: ', error);\n    }\n  });\n  const showList = !loading && !error;\n  return <FormField label={label} dataTest={dataTest}>\n            {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n            {error && <div data-test={`${dataTest}-error`}>\n                    <p>\n                        {i18n.t('Something went wrong when loading the programs!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showList && <SelectableList name=\"programPicker\" label={i18n.t('Filter programs by name')} selected={selected} setSelected={setSelected} multiSelect={multiSelect} list={list} withFilter={withFilter} withActions={withActions} dataTest={`${dataTest}-list`} />}\n            {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n        </FormField>;\n};\n\nProgramPicker.defaultProps = {\n  multiSelect: false,\n  withFilter: true,\n  withActions: false,\n  autoSelectFirst: true\n};\nProgramPicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  autoSelectFirst: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  withActions: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { ProgramPicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { ProgramPicker } from '../';\n\nconst SINGLE_PROGRAM_VALIDATOR = selectedPrograms => selectedPrograms.length == 0 ? i18n.t('At least one program must be selected') : undefined;\n\nconst SINGLE_EXACT_PROGRAM_VALIDATOR = selectedPrograms => selectedPrograms.length != 1 ? i18n.t('One program must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => <ProgramPicker meta={meta} selected={value} setSelected={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst ProgramPickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nProgramPickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { ProgramPickerField, SINGLE_PROGRAM_VALIDATOR, SINGLE_EXACT_PROGRAM_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { SelectField } from '../';\nimport { useProgramStages } from '../../hooks/';\n\nconst SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR = programStage => !programStage ? i18n.t('One program stage must be selected') : undefined;\n\nconst ProgramStages = ({\n  name,\n  label,\n  selectedPrograms,\n  form,\n  validator,\n  dataTest\n}) => {\n  const setProgramStage = val => form.change(name, val);\n\n  const program = selectedPrograms.length > 0 ? selectedPrograms[0] : undefined;\n  const {\n    loading: programStagesLoading,\n    error: programStagesError,\n    validationText: programStagesValidationText,\n    programStages\n  } = useProgramStages(program, setProgramStage);\n  return <SelectField name={name} loading={programStagesLoading} label={label} validate={validator} dataTest={dataTest} options={programStages} validationText={programStagesValidationText} error={!!programStagesError} dense />;\n};\n\nProgramStages.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  form: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  selectedPrograms: PropTypes.array.isRequired,\n  validator: PropTypes.func\n};\nexport { ProgramStages, SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Help, Radio } from '@dhis2/ui-core';\nimport { optionPropType, optionsPropType } from '../../utils/options';\nimport { FormField } from '../';\nimport styles from './RadioGroup.module.css';\n\nconst RadioGroup = ({\n  name,\n  label,\n  options,\n  checked,\n  setValue,\n  vertical,\n  dataTest\n}) => {\n  const onChange = label => ({\n    value\n  }) => setValue({\n    value: value,\n    label: label\n  });\n\n  return <FormField label={label} dataTest={dataTest} name={name}>\n            <div className={vertical ? undefined : styles.inputs}>\n                {options.map(o => <div key={o.value}>\n                        <Radio className={styles.radio} name={name} value={o.value} label={o.label} checked={o.value == checked.value} onChange={onChange(o.label)} dataTest={`${dataTest}-${o.value}`} />\n                        {o.help && <Help>{o.help}</Help>}\n                    </div>)}\n            </div>\n        </FormField>;\n};\n\nRadioGroup.propTypes = {\n  checked: optionPropType.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  options: optionsPropType.isRequired,\n  setValue: PropTypes.func.isRequired,\n  vertical: PropTypes.bool\n};\nexport { RadioGroup };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field } from '@dhis2/ui-forms';\nimport { RadioGroup } from './RadioGroup';\nimport { optionPropType } from '../../utils/options';\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  ...rest\n}) => <RadioGroup name={inputName} error={error} checked={value} setValue={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: optionPropType.isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst RadioGroupField = ({\n  name,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} inputName={name} {...rest} />;\n};\n\nRadioGroupField.propTypes = {\n  name: PropTypes.string.isRequired\n};\nexport { RadioGroupField };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { FileUpload as FileUploadGeneric } from '../';\nimport { SINGLE_FILE_VALIDATOR } from '../FileUpload/FileUpload';\nconst NAME = 'files';\nconst LABEL = i18n.t('File');\nconst DATATEST = 'input-file-upload';\nconst VALIDATOR = SINGLE_FILE_VALIDATOR;\n\nconst FileUpload = () => <FileUploadGeneric name={NAME} label={LABEL} validator={VALIDATOR} dataTest={DATATEST} />;\n\nexport { FileUpload };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ImportButtonStrip as ImportButtonStripGeneric } from '../';\nconst DRYRUNDATATEST = 'input-dry-run';\nconst IMPORTDATATEST = 'input-import-submit';\nconst DATATEST = 'input-import-button-strip';\n\nconst ImportButtonStrip = ({\n  form\n}) => <ImportButtonStripGeneric form={form} dryRunDataTest={DRYRUNDATATEST} importDataTest={IMPORTDATATEST} dataTest={DATATEST} />;\n\nImportButtonStrip.propTypes = {\n  form: PropTypes.object.isRequired\n};\nexport { ImportButtonStrip };","import React from 'react';\nimport { FormAlerts as FormAlertsGeneric } from '../';\nconst DATATEST = 'input-form-alerts';\n\nconst FormAlerts = ({\n  alerts\n}) => <FormAlertsGeneric alerts={alerts} dataTest={DATATEST} />;\n\nFormAlerts.propTypes = {\n  alerts: FormAlertsGeneric.propTypes.alerts\n};\nexport { FormAlerts };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { optionsPropType } from '../../utils/options';\nconst NAME = 'format';\nconst DATATEST = 'input-format';\nconst LABEL = i18n.t('Format');\n\nconst Format = ({\n  availableFormats\n}) => <RadioGroupField name={NAME} label={LABEL} options={availableFormats} dataTest={DATATEST} />;\n\nFormat.propTypes = {\n  availableFormats: optionsPropType.isRequired\n};\nexport { Format };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'firstRowIsHeader';\nconst DATATEST = 'input-first-row-is-header';\nconst LABEL = i18n.t('First row is header');\n\nconst FirstRowIsHeader = ({\n  show,\n  value\n}) => show && <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nFirstRowIsHeader.propTypes = {\n  show: PropTypes.bool.isRequired,\n  value: PropTypes.bool.isRequired\n};\nexport { FirstRowIsHeader };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { SelectField } from '../';\nimport { useClassKeys } from '../../hooks/';\nconst NAME = 'classKey';\nconst LABEL = i18n.t('Object');\nconst DATATEST = 'input-class-key';\n\nconst ClassKey = ({\n  form,\n  prevValue,\n  show = true\n}) => {\n  const setClassKey = val => form.change(NAME, val);\n\n  const {\n    loading: classKeysLoading,\n    error: classKeysError,\n    validationText: classKeysValidationText,\n    classKeys\n  } = useClassKeys(setClassKey, prevValue);\n  return show && <SelectField name={NAME} label={LABEL} options={classKeys} loading={classKeysLoading} dataTest={DATATEST} validationText={classKeysValidationText} error={!!classKeysError} filterable dense />;\n};\n\nClassKey.propTypes = {\n  form: PropTypes.object.isRequired,\n  prevValue: PropTypes.object,\n  show: PropTypes.bool\n};\nexport { ClassKey };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { strategyOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'strategy';\nconst DATATEST = 'input-strategy';\nconst LABEL = i18n.t('Strategy');\n\nconst Strategy = () => <RadioGroupField name={NAME} label={LABEL} options={strategyOptions} dataTest={DATATEST} />;\n\nexport { Strategy };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'preheatCache';\nconst DATATEST = 'input-preheat-cache';\nconst LABEL = i18n.t('Preheat cache');\nconst HELPTEXT = i18n.t('Faster for large imports');\n\nconst PreheatCache = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} help={HELPTEXT} />;\n\nPreheatCache.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { PreheatCache };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'skipAudit';\nconst DATATEST = 'input-has-authority-to-skip-audit';\nconst LABEL = i18n.t('Skip audit');\nconst HELPTEXT = i18n.t('Improves performance at the cost of ability to audit changes');\n\nconst SkipAudit = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} help={HELPTEXT} />;\n\nSkipAudit.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { SkipAudit };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'skipExistingCheck';\nconst DATATEST = 'input-skip-exisiting-check';\nconst LABEL = i18n.t('Skip exisiting check');\nconst HELPTEXT = i18n.t('Faster, but unsafe');\n\nconst SkipExistingCheck = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} help={HELPTEXT} />;\n\nSkipExistingCheck.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { SkipExistingCheck };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { identifierOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'identifier';\nconst DATATEST = 'input-identifier';\nconst LABEL = i18n.t('Identifier');\n\nconst Identifier = () => <RadioGroupField name={NAME} label={LABEL} options={identifierOptions} dataTest={DATATEST} />;\n\nexport { Identifier };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { importReportModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'importReportMode';\nconst DATATEST = 'input-import-report-mode';\nconst LABEL = i18n.t('Import report mode');\n\nconst ImportReportMode = () => <RadioGroupField name={NAME} label={LABEL} options={importReportModeOptions} dataTest={DATATEST} />;\n\nexport { ImportReportMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { preheatModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'preheatMode';\nconst DATATEST = 'input-preheat-mode';\nconst LABEL = i18n.t('Preheat mode');\n\nconst PreheatMode = () => <RadioGroupField name={NAME} label={LABEL} options={preheatModeOptions} dataTest={DATATEST} />;\n\nexport { PreheatMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { importStrategyOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'importStrategy';\nconst DATATEST = 'input-import-strategy';\nconst LABEL = i18n.t('Import strategy');\n\nconst ImportStrategy = () => <RadioGroupField name={NAME} label={LABEL} options={importStrategyOptions} dataTest={DATATEST} />;\n\nexport { ImportStrategy };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { atomicModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'atomicMode';\nconst DATATEST = 'input-atomic-mode';\nconst LABEL = i18n.t('Atomic mode');\n\nconst AtomicMode = () => <RadioGroupField name={NAME} label={LABEL} options={atomicModeOptions} dataTest={DATATEST} />;\n\nexport { AtomicMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { mergeModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'mergeMode';\nconst DATATEST = 'input-merge-mode';\nconst LABEL = i18n.t('Merge mode');\n\nconst MergeMode = () => <RadioGroupField name={NAME} label={LABEL} options={mergeModeOptions} dataTest={DATATEST} />;\n\nexport { MergeMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { flushModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'flushMode';\nconst DATATEST = 'input-flush-mode';\nconst LABEL = i18n.t('Flush mode');\n\nconst FlushMode = () => <RadioGroupField name={NAME} label={LABEL} options={flushModeOptions} dataTest={DATATEST} />;\n\nexport { FlushMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { inclusionStrategyOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'inclusionStrategy';\nconst DATATEST = 'input-inclusion-strategy';\nconst LABEL = i18n.t('Inclusion strategy');\n\nconst InclusionStrategy = () => <RadioGroupField name={NAME} label={LABEL} options={inclusionStrategyOptions} dataTest={DATATEST} />;\n\nexport { InclusionStrategy };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'skipSharing';\nconst DATATEST = 'input-skip-sharing';\nconst LABEL = i18n.t('Skip sharing');\n\nconst SkipSharing = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nSkipSharing.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { SkipSharing };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'skipValidation';\nconst DATATEST = 'input-skip-validation';\nconst LABEL = i18n.t('Skip validation');\n\nconst SkipValidation = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nSkipValidation.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { SkipValidation };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'isAsync';\nconst DATATEST = 'input-is-async';\nconst LABEL = i18n.t('Async');\n\nconst IsAsync = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nIsAsync.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { IsAsync };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { OrgUnitTreeField } from '../../components/';\nimport { SINGLE_ORG_VALIDATOR, SINGLE_EXACT_ORG_VALIDATOR } from '../../components/OrgUnitTree/OrgUnitTreeField';\nconst NAME = 'selectedOrgUnits';\nconst LABEL = i18n.t('Organisation unit');\nconst DATATEST = 'input-org-unit-tree';\n\nconst OrgUnitTree = ({\n  multiSelect = true\n}) => {\n  const orgValidator = multiSelect ? SINGLE_ORG_VALIDATOR : SINGLE_EXACT_ORG_VALIDATOR;\n  const validator = composeValidators(hasValue, orgValidator);\n  return <OrgUnitTreeField name={NAME} validator={validator} multiSelect={multiSelect} label={LABEL} dataTest={DATATEST} />;\n};\n\nOrgUnitTree.propTypes = {\n  multiSelect: PropTypes.bool\n};\nexport { OrgUnitTree };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { DataSetPickerField } from '../../components/';\nimport { SINGLE_DATASET_VALIDATOR, SINGLE_EXACT_DATASET_VALIDATOR } from '../../components/DataSetPicker/DataSetPickerField';\nconst NAME = 'selectedDataSets';\nconst LABEL = i18n.t('Data sets');\nconst DATATEST = 'input-data-set-picker';\n\nconst DataSetPicker = ({\n  multiSelect = true\n}) => {\n  const dataSetValidator = multiSelect ? SINGLE_DATASET_VALIDATOR : SINGLE_EXACT_DATASET_VALIDATOR;\n  const validator = composeValidators(hasValue, dataSetValidator);\n  return <DataSetPickerField name={NAME} validator={validator} multiSelect={multiSelect} label={LABEL} dataTest={DATATEST} />;\n};\n\nDataSetPicker.propTypes = {\n  multiSelect: PropTypes.bool\n};\nexport { DataSetPicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { ProgramPickerField } from '../../components/';\nimport { SINGLE_PROGRAM_VALIDATOR, SINGLE_EXACT_PROGRAM_VALIDATOR } from '../../components/ProgramPicker/ProgramPickerField';\nconst NAME = 'selectedPrograms';\nconst LABEL = i18n.t('Programs');\nconst DATATEST = 'input-program-picker';\n\nconst ProgramPicker = ({\n  multiSelect,\n  show,\n  ...rest\n}) => {\n  const programValidator = multiSelect ? SINGLE_PROGRAM_VALIDATOR : SINGLE_EXACT_PROGRAM_VALIDATOR;\n  const validator = composeValidators(hasValue, programValidator);\n  return show && <ProgramPickerField name={NAME} multiSelect={multiSelect} validator={validator} withActions={false} label={LABEL} dataTest={DATATEST} {...rest} />;\n};\n\nProgramPicker.defaultProps = {\n  multiSelect: false,\n  show: true\n};\nProgramPicker.propTypes = {\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { ProgramPicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'includeChildren';\nconst DATATEST = 'input-include-children';\nconst LABEL = i18n.t('Include children');\n\nconst IncludeChildren = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nIncludeChildren.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { IncludeChildren };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'includeDeleted';\nconst DATATEST = 'input-include-deleted';\nconst LABEL = i18n.t('Include deleted');\n\nconst IncludeDeleted = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nIncludeDeleted.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { IncludeDeleted };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { optionsPropType } from '../../utils/options';\nconst NAME = 'compression';\nconst DATATEST = 'input-compression';\nconst LABEL = i18n.t('Compression');\n\nconst Compression = ({\n  availableCompressions\n}) => <RadioGroupField name={NAME} label={LABEL} options={availableCompressions} dataTest={DATATEST} />;\n\nCompression.propTypes = {\n  availableCompressions: optionsPropType.isRequired\n};\nexport { Compression };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { inclusionOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'inclusion';\nconst DATATEST = 'input-inclusion';\nconst LABEL = i18n.t('Inclusion');\n\nconst Inclusion = () => <RadioGroupField name={NAME} label={LABEL} options={inclusionOptions} dataTest={DATATEST} />;\n\nexport { Inclusion };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'startDate';\nconst DATATEST = 'input-start-date';\nconst LABEL = i18n.t('Start date');\nconst VALIDATOR = composeValidators(hasValue, DATE_VALIDATOR);\n\nconst StartDate = () => <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nexport { StartDate };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'endDate';\nconst DATATEST = 'input-end-date';\nconst LABEL = i18n.t('End date');\nconst VALIDATOR = composeValidators(hasValue, DATE_VALIDATOR);\n\nconst EndDate = () => <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nexport { EndDate };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui-core';\nconst DATATEST = 'input-export-submit';\nconst LABEL = i18n.t('Export');\n\nconst ExportButton = () => <Button primary type=\"submit\" dataTest={DATATEST}>\n        {LABEL}\n    </Button>;\n\nexport { ExportButton };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { ProgramStages as ProgramStagesGeneric } from '../../components/';\nimport { SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR } from '../../components/ProgramStages/ProgramStages';\nconst VALIDATOR = composeValidators(hasValue, SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR);\nconst NAME = 'programStage';\nconst LABEL = i18n.t('Program stage');\nconst DATATEST = 'input-program-stage-select';\n\nconst ProgramStages = props => <ProgramStagesGeneric name={NAME} label={LABEL} validator={VALIDATOR} dataTest={DATATEST} {...props} />;\n\nexport { ProgramStages };","/**\n * Group and sort schemas\n * ======================\n */\nconst groupSchemas = schemas => schemas.reduce((groups, schema) => {\n  const {\n    group\n  } = schema;\n  return { ...groups,\n    // add schema to \"group\" collection if existing,\n    // otherwise create new collection with schema as first entry\n    [group]: groups[group] ? [...groups[group], schema] : [schema]\n  };\n}, {});\n\nconst combineSingleItemGroups = groups => {\n  const groupNames = Object.keys(groups);\n  return groupNames.reduce((combinedGroups, groupName) => {\n    const group = groups[groupName];\n\n    if (group.length === 1) {\n      return { ...combinedGroups,\n        other: [...combinedGroups.other, group[0]]\n      };\n    }\n\n    return { ...combinedGroups,\n      [groupName]: group\n    };\n  }, {\n    other: []\n  });\n};\n/**\n * Get group label helpers\n * =======================\n */\n\n/**\n * This function will loop through all schemas and\n * compare the the lower case groupKey with\n * the schemas' name.\n * If a match is found, that match will be returned\n */\n\n\nfunction findLabelByLowerCaseComparison(groupKey, schemas) {\n  const isGroupKeyMatchingLowerCaseSchemaName = schemaName => groupKey === schemaName.toLowerCase();\n\n  return schemas.reduce((foundLabel, {\n    name: schemaName,\n    displayName\n  }) => {\n    // do not try to compare anything if a label already\n    // has been found\n    if (foundLabel) return foundLabel;\n\n    if (isGroupKeyMatchingLowerCaseSchemaName(schemaName)) {\n      return displayName;\n    }\n\n    return foundLabel;\n  }, '');\n}\n\nconst ucFirst = str => str[0].toUpperCase() + str.substr(1);\n/**\n * This function will go through all schemas\n * and will compare the scheme name with the\n * lower case group key at position 0 of the schema key.\n * Once a match is found, the match will be extracted,\n * spaces will be inserted before all capital letters\n * and the result returned\n */\n\n\nfunction findKeyByCamelCaseComparison(groupKey, schemas) {\n  const isGroupKeyInSchemaName = schemaName => schemaName.includes(groupKey) && schemaName.indexOf(groupKey) === 0; // Will return either a label or an empty string\n  // if no match for the groupKey was found\n\n\n  return schemas.reduce((foundLabel, {\n    name: schemaName\n  }) => {\n    // do not try to compare anything if a label already\n    // has been found\n    if (foundLabel) return foundLabel;\n    const lowerCaseSchemaName = schemaName.toLowerCase();\n\n    if (isGroupKeyInSchemaName(lowerCaseSchemaName)) {\n      return ucFirst(schemaName // extract part that matches the groupKey\n      .substr(0, groupKey.length) // insert space before capital letters\n      .replace(/([A-Z]+)/g, ' $1'));\n    }\n\n    return foundLabel;\n  }, '');\n}\n\nfunction extractGroupLabelFromSchemas(groupKey, schemas) {\n  const lowerCaseGroupKey = groupKey.toLowerCase();\n\n  if (lowerCaseGroupKey === 'oauth2' || lowerCaseGroupKey === 'other') {\n    return groupKey;\n  }\n\n  return findLabelByLowerCaseComparison(lowerCaseGroupKey, schemas) || findKeyByCamelCaseComparison(lowerCaseGroupKey, schemas) || groupKey[0].toUpperCase() + groupKey.substr(1);\n}\n\nconst getSchemaGroups = schemas => {\n  const groups = groupSchemas(schemas);\n  const combinedGroups = combineSingleItemGroups(groups);\n  return combinedGroups;\n};\n\nconst getGroupLabels = schemaGroups => {\n  return Object.entries(schemaGroups).reduce((groupLabels, [groupKey, schemas]) => {\n    const label = extractGroupLabelFromSchemas(groupKey, schemas);\n    return { ...groupLabels,\n      [groupKey]: label\n    };\n  }, {});\n};\n\nconst getGroupOrder = schemas => {\n  const groupKeys = Object.keys(schemas);\n  groupKeys.sort();\n  return groupKeys;\n};\n\nconst filterOutExcludedSchemas = (excludedSchemas, schemas) => schemas.filter(schema => schema.metadata && !excludedSchemas.has(schema.collectionName));\n\nconst groupName = klass => {\n  const group = klass.split('.');\n  group.pop();\n\n  if (!klass.includes('.dhis')) {\n    group.pop();\n  }\n\n  return group[group.length - 1].replace(/(.)([A-Z])/g, '$1 $2');\n};\n\nconst formatSchemas = (schemas, checkedByDefault) => schemas.map(schema => ({\n  checked: checkedByDefault,\n  label: schema.displayName,\n  name: schema.collectionName,\n  group: groupName(schema.klass)\n}));\n\nexport { filterOutExcludedSchemas, groupName, formatSchemas, getSchemaGroups, getGroupLabels, getGroupOrder };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Checkbox } from '@dhis2/ui-core';\nimport styles from './Schemas.module.css';\n\nconst SchemaGroup = ({\n  label,\n  schemas,\n  toggleSchema,\n  dataTest\n}) => <div className={styles.group} data-test={dataTest}>\n        <span className={styles.formLabel}>{label}</span>\n        <div className={styles.schema}>\n            {schemas.map((schema, ind) => <div key={schema.name}>\n                    <Checkbox label={schema.label} name={`schemas.${schema.name}`} value={`schemas.${schema.name}`} checked={schema.checked} onChange={() => toggleSchema(ind)} />\n                </div>)}\n        </div>\n    </div>;\n\nSchemaGroup.propTypes = {\n  label: PropTypes.string.isRequired,\n  schemas: PropTypes.arrayOf(PropTypes.exact({\n    checked: PropTypes.bool.isRequired,\n    label: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    group: PropTypes.string.isRequired\n  })).isRequired,\n  toggleSchema: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\nexport { SchemaGroup };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader, Help } from '@dhis2/ui-core';\nimport { filterOutExcludedSchemas, formatSchemas, getSchemaGroups, getGroupLabels, getGroupOrder } from './helper';\nimport { SchemaGroup } from './SchemaGroup';\nimport styles from './Schemas.module.css';\nconst schemaQuery = {\n  schemas: {\n    resource: 'schemas',\n    params: {\n      fields: ['metadata', 'collectionName', 'displayName', 'klass']\n    }\n  }\n};\n\nconst Schemas = ({\n  excludeSchemas,\n  setCheckedSchemas,\n  meta,\n  checkedByDefault,\n  dataTest\n}) => {\n  const [schemaGroups, setSchemaGroups] = useState(undefined);\n  const [schemaGroupLabels, setSchemaGroupLabels] = useState(undefined);\n  const [schemaGroupOrder, setSchemaGroupOrder] = useState(undefined);\n  const {\n    error,\n    loading\n  } = useDataQuery(schemaQuery, {\n    onComplete: data => {\n      const schemas = data.schemas.schemas;\n      const filteredSchemas = filterOutExcludedSchemas(excludeSchemas, schemas);\n      const formattedSchemas = formatSchemas(filteredSchemas, checkedByDefault);\n      const groups = getSchemaGroups(formattedSchemas);\n      setSchemaGroups(groups);\n      setSchemaGroupOrder(getGroupOrder(groups));\n      setSchemaGroupLabels(getGroupLabels(groups));\n      propagateCheckedSchemas(groups);\n    },\n    onError: error => {\n      console.error('Schemas error: ', error);\n    }\n  });\n\n  const propagateCheckedSchemas = updatedSchemaGroups => {\n    setCheckedSchemas(Object.keys(updatedSchemaGroups).reduce((acc, groupName) => [...acc, ...updatedSchemaGroups[groupName].filter(s => s.checked).map(s => s.name)], []));\n  };\n\n  const onSelectGeneric = val => () => {\n    const updatedSchemaGroups = Object.keys(schemaGroups).reduce((acc, groupName) => ({ ...acc,\n      [groupName]: schemaGroups[groupName].reduce((grAcc, group) => [...grAcc, { ...group,\n        checked: val\n      }], [])\n    }), {});\n    setSchemaGroups(updatedSchemaGroups);\n    propagateCheckedSchemas(updatedSchemaGroups);\n  };\n\n  const toggleSchema = schemaGroup => ind => {\n    const updatedGroup = [...schemaGroups[schemaGroup]];\n    updatedGroup[ind] = { ...updatedGroup[ind],\n      checked: !updatedGroup[ind].checked\n    };\n    const updatedSchemaGroups = { ...schemaGroups,\n      [schemaGroup]: updatedGroup\n    };\n    setSchemaGroups(updatedSchemaGroups);\n    propagateCheckedSchemas(updatedSchemaGroups);\n  };\n\n  const showSchemas = !loading && !error;\n  return <div className={styles.container} data-test={dataTest}>\n            {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n            {error && <div data-test={`${dataTest}-error`}>\n                    <p>\n                        {i18n.t('Something went wrong when loading the schemas!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showSchemas && <>\n                    <ButtonStrip>\n                        <Button onClick={onSelectGeneric(true)} dataTest={`${dataTest}-select-all`}>\n                            {i18n.t('Select All')}\n                        </Button>\n                        <Button onClick={onSelectGeneric(false)} dataTest={`${dataTest}-select-none`}>\n                            {i18n.t('Select None')}\n                        </Button>\n                    </ButtonStrip>\n\n                    <div className={styles.formControl}>\n                        {schemaGroupOrder.map(groupKey => {\n          const label = schemaGroupLabels[groupKey];\n          return <SchemaGroup key={label} label={label} schemas={schemaGroups[groupKey]} toggleSchema={toggleSchema(groupKey)} />;\n        })}\n                    </div>\n                    {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n                </>}\n        </div>;\n};\n\nSchemas.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  excludeSchemas: PropTypes.object.isRequired,\n  meta: PropTypes.object.isRequired,\n  setCheckedSchemas: PropTypes.func.isRequired,\n  checkedByDefault: PropTypes.bool\n};\nexport { Schemas };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { Schemas } from './Schemas';\n\nconst SINGLE_SCHEMA_VALIDATOR = checkedSchemas => checkedSchemas.length == 0 ? i18n.t('At least one schema must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    onChange\n  },\n  meta,\n  ...rest\n}) => <Schemas meta={meta} setCheckedSchemas={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst SchemasField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nSchemasField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { SchemasField, SINGLE_SCHEMA_VALIDATOR };","import React from 'react';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { SchemasField } from '../../components/';\nimport { SINGLE_SCHEMA_VALIDATOR } from '../../components/Schemas/SchemasField';\nconst NAME = 'checkedSchemas';\nconst VALIDATOR = composeValidators(hasValue, SINGLE_SCHEMA_VALIDATOR);\nconst DATATEST = 'input-schemas';\nconst EXCLUDE_SCHEMAS = new Set(['analyticsTableHooks', 'charts', 'constants', 'dataElementDimensions', 'dataEntryForms', 'dataSetNotificationTemplates', 'dataStores', 'documents', 'eventCharts', 'eventReports', 'icons', 'jobConfigurations', 'messageConversations', 'metadataVersions', 'minMaxDataElements', 'oAuth2Clients', 'programDataElements', 'programNotificationTemplates', 'pushAnalysis', 'reportTables', 'reportingRates', 'reports', 'sections', 'smsCommands', 'sqlViews', 'trackedEntityInstanceFilters', 'validationNotificationTemplates']);\n\nconst Schemas = () => <SchemasField name={NAME} excludeSchemas={EXCLUDE_SCHEMAS} validator={VALIDATOR} checkedByDefault dataTest={DATATEST} />;\n\nexport { Schemas };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { SelectField } from '../../components/';\nimport { objectTypeOptions } from '../../utils/options';\nconst NAME = 'objectType';\nconst LABEL = i18n.t('Object type');\nconst DATATEST = 'input-object-type';\n\nconst ObjectType = () => <SelectField name={NAME} label={LABEL} options={objectTypeOptions} filled initialFocus dataTest={DATATEST} />;\n\nexport { ObjectType };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { SelectField } from '../';\nimport { useObjects } from '../../hooks/';\n\nconst SINGLE_EXACT_OBJECT_VALIDATOR = object => !object ? i18n.t('One object must be selected') : undefined;\n\nconst NAME = 'object';\nconst LABEL = i18n.t('Object');\nconst VALIDATOR = composeValidators(hasValue, SINGLE_EXACT_OBJECT_VALIDATOR);\nconst DATATEST = 'input-object-select';\n\nconst Objects = ({\n  objectType,\n  form\n}) => {\n  const setObjectListSelected = val => form.change(NAME, val);\n\n  const {\n    loading: objectsLoading,\n    error: objectsError,\n    validationText: objectsValidationText,\n    objects\n  } = useObjects(objectType, setObjectListSelected);\n  return <SelectField loading={objectsLoading} name={NAME} label={LABEL} options={objects} validate={VALIDATOR} dataTest={DATATEST} validationText={objectsValidationText} error={!!objectsError} filterable dense />;\n};\n\nObjects.propTypes = {\n  form: PropTypes.object.isRequired,\n  objectType: PropTypes.object.isRequired\n};\nexport { Objects };","import { useState, useEffect } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataEngine } from '@dhis2/app-runtime';\n\nconst listQuery = resource => ({\n  data: {\n    resource: resource,\n    fields: 'id,displayName',\n    params: {\n      paging: 'false'\n    }\n  }\n});\n\nconst useObjects = (type, setSelected) => {\n  const engine = useDataEngine();\n  const [error, setError] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [objects, setObjects] = useState([]);\n  useEffect(() => {\n    setLoading(true);\n    setSelected(undefined);\n    engine.query(listQuery(type.value), {\n      onComplete: data => {\n        const list = data.data[type.value];\n        const formattedList = list.map(e => ({\n          value: e.id,\n          label: e.displayName\n        }));\n        setObjects(formattedList);\n        setSelected(formattedList[0]);\n        setLoading(false);\n      },\n      onError: error => {\n        setError(error);\n        console.error('useObjects error: ', error);\n      }\n    });\n  }, [type]);\n  const validationText = error && `${i18n.t('Something went wrong when loading the objects')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    objects\n  };\n};\n\nexport { useObjects };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { DataElementIdScheme as DataElementIdSchemeGeneric } from '../';\nconst NAME = 'dataElementIdScheme';\nconst DATATEST = 'input-data-element-id-scheme';\nconst LABEL = i18n.t('Data element ID scheme');\n\nconst DataElementIdScheme = () => <DataElementIdSchemeGeneric name={NAME} label={LABEL} dataTest={DATATEST} />;\n\nexport { DataElementIdScheme };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { EventIdScheme as EventIdSchemeGeneric } from '../';\nconst NAME = 'eventIdScheme';\nconst DATATEST = 'input-event-id-scheme';\nconst LABEL = i18n.t('Event ID scheme');\n\nconst EventIdScheme = () => <EventIdSchemeGeneric name={NAME} label={LABEL} dataTest={DATATEST} />;\n\nexport { EventIdScheme };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { IdScheme as IdSchemeGeneric } from '../';\nconst NAME = 'idScheme';\nconst DATATEST = 'input-id-scheme';\nconst LABEL = i18n.t('ID scheme');\n\nconst IdScheme = () => <IdSchemeGeneric name={NAME} label={LABEL} dataTest={DATATEST} />;\n\nexport { IdScheme };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { OrgUnitIdScheme as OrgUnitIdSchemeGeneric } from '../';\nconst NAME = 'orgUnitIdScheme';\nconst DATATEST = 'input-org-unit-id-scheme';\nconst LABEL = i18n.t('Organisation unit ID scheme');\n\nconst OrgUnitIdScheme = () => <OrgUnitIdSchemeGeneric name={NAME} label={LABEL} dataTest={DATATEST} />;\n\nexport { OrgUnitIdScheme };","const hasAuthorityToSkipAudit = authorities => authorities.includes('ALL') || authorities.includes('F_SKIP_DATA_IMPORT_AUDIT');\n\nconst hasAuthorityToSelectAllOrgUnits = authorities => authorities.includes('ALL');\n\nexport { hasAuthorityToSkipAudit, hasAuthorityToSelectAllOrgUnits };","import React, { useContext } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { UserContext } from '../../contexts/';\nimport { hasAuthorityToSelectAllOrgUnits } from '../WithAuthority/predicates';\nimport { orgUnitSelectionModeOptions } from '../../utils/options';\nimport { RadioGroupField } from '../';\nconst NAME = 'ouMode';\nconst DATATEST = 'input-ouMode';\nconst LABEL = i18n.t('Organisation unit selection mode');\n\nconst OrgUnitMode = () => {\n  const user = useContext(UserContext);\n  const canSelectAllOrgUnits = user ? hasAuthorityToSelectAllOrgUnits(user.authorities) : false;\n  const options = canSelectAllOrgUnits ? orgUnitSelectionModeOptions : orgUnitSelectionModeOptions.filter(({\n    value\n  }) => value != 'ALL');\n  return <RadioGroupField name={NAME} label={LABEL} options={options} dataTest={DATATEST} vertical />;\n};\n\nexport { OrgUnitMode };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { teiTypeFilterOptions } from '../../utils/options';\nconst NAME = 'teiTypeFilter';\nconst DATATEST = 'input-tei-type-filter';\nconst LABEL = i18n.t('Filter by');\n\nconst TEITypeFilter = () => <RadioGroupField name={NAME} label={LABEL} options={teiTypeFilterOptions} dataTest={DATATEST} />;\n\nexport { TEITypeFilter };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { programStatusOptions } from '../../utils/options';\nconst NAME = 'programStatus';\nconst DATATEST = 'input-program-status';\nconst LABEL = i18n.t('Program status');\n\nconst ProgramStatus = ({\n  show\n}) => show && <RadioGroupField name={NAME} label={LABEL} options={programStatusOptions} dataTest={DATATEST} />;\n\nProgramStatus.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramStatus };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { followUpStatusOptions } from '../../utils/options';\nconst NAME = 'followUpStatus';\nconst DATATEST = 'input-follow-up-status';\nconst LABEL = i18n.t('Follow up status');\n\nconst FollowUpStatus = ({\n  show\n}) => show && <RadioGroupField name={NAME} label={LABEL} options={followUpStatusOptions} dataTest={DATATEST} />;\n\nFollowUpStatus.propTypes = {\n  show: PropTypes.bool\n};\nexport { FollowUpStatus };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'programStartDate';\nconst DATATEST = 'input-program-start-date';\nconst LABEL = i18n.t('Program start date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\n\nconst ProgramStartDate = ({\n  show\n}) => show && <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nProgramStartDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramStartDate };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'programEndDate';\nconst DATATEST = 'input-program-end-date';\nconst LABEL = i18n.t('Program end date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\n\nconst ProgramEndDate = ({\n  show\n}) => show && <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nProgramEndDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramEndDate };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { TETypePicker } from '../';\n\nconst SINGLE_TETYPE_VALIDATOR = selectedTypes => selectedTypes.length == 0 ? i18n.t('At least one tracked entity type must be selected') : undefined;\n\nconst SINGLE_EXACT_TETYPE_VALIDATOR = selectedTypes => selectedTypes.length != 1 ? i18n.t('One tracked entity type must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => <TETypePicker meta={meta} selected={value} setSelected={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst TETypePickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nTETypePickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { TETypePickerField, SINGLE_TETYPE_VALIDATOR, SINGLE_EXACT_TETYPE_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { TETypePickerField } from '../';\nimport { SINGLE_TETYPE_VALIDATOR, SINGLE_EXACT_TETYPE_VALIDATOR } from '../TETypePicker/TETypePickerField';\nconst NAME = 'selectedTETypes';\nconst DATATEST = 'input-te-type-picker';\nconst LABEL = i18n.t('Tracked entity types');\n\nconst TETypePicker = ({\n  multiSelect,\n  show,\n  ...rest\n}) => {\n  const teTypeValidator = multiSelect ? SINGLE_TETYPE_VALIDATOR : SINGLE_EXACT_TETYPE_VALIDATOR;\n  const validator = composeValidators(hasValue, teTypeValidator);\n  return show && <TETypePickerField name={NAME} multiSelect={multiSelect} validator={validator} withActions={false} label={LABEL} dataTest={DATATEST} {...rest} />;\n};\n\nTETypePicker.defaultProps = {\n  multiSelect: false\n};\nTETypePicker.propTypes = {\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { TETypePicker };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { lastUpdatedFilterOptions } from '../../utils/options';\nconst NAME = 'lastUpdatedFilter';\nconst DATATEST = 'input-last-updated-filter';\nconst LABEL = i18n.t('Filter by last updated');\n\nconst LastUpdatedFilter = () => <RadioGroupField name={NAME} label={LABEL} options={lastUpdatedFilterOptions} dataTest={DATATEST} />;\n\nexport { LastUpdatedFilter };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'lastUpdatedStartDate';\nconst DATATEST = 'input-last-updated-start-date';\nconst LABEL = i18n.t('Last updated start date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\n\nconst LastUpdatedStartDate = ({\n  show\n}) => show && <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nLastUpdatedStartDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedStartDate };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui-forms';\nimport { DatePickerField } from '../';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField';\nconst NAME = 'lastUpdatedEndDate';\nconst DATATEST = 'input-last-updated-end-date';\nconst LABEL = i18n.t('Last updated end date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\n\nconst LastUpdatedEndDate = ({\n  show\n}) => show && <DatePickerField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nLastUpdatedEndDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedEndDate };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { InputField } from '@dhis2/ui-core';\nimport { Field } from '@dhis2/ui-forms';\nimport { FormField } from '../';\nconst durationRegex = /^(?!$)(\\d+d)?(\\d+h)?(\\d+m)?(\\d+s)?$/;\n\nconst DURATION_VALIDATOR = duration => duration.match(durationRegex) ? undefined : i18n.t('Invalid duration');\n\nconst formatHelpText = `${i18n.t('Format')}: 00d00h00m00s`;\nconst exampleDuration = '100d5h30m';\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  label,\n  dataTest\n}) => {\n  const onChangeHelper = ({\n    value\n  }) => {\n    onChange(value);\n  };\n\n  return <FormField label={label} dataTest={dataTest}>\n            <InputField name={inputName} value={value} onChange={onChangeHelper} inputWidth=\"200px\" error={!!error} validationText={error} helpText={formatHelpText} placeholder={exampleDuration} />\n        </FormField>;\n};\n\nWrapper.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  input: PropTypes.shape({\n    value: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]),\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string\n  }).isRequired\n};\n\nconst DurationField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} inputName={name} validate={validator} {...rest} />;\n};\n\nDurationField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func.isRequired\n};\nexport { DurationField, DURATION_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { DurationField } from '../';\nimport { DURATION_VALIDATOR } from '../Duration/DurationField';\nconst NAME = 'lastUpdatedDuration';\nconst DATATEST = 'input-last-updated-duration';\nconst LABEL = i18n.t('Last updated duration');\nconst VALIDATOR = composeValidators(hasValue, DURATION_VALIDATOR);\n\nconst LastUpdatedDuration = ({\n  show\n}) => show && <DurationField name={NAME} validator={VALIDATOR} label={LABEL} dataTest={DATATEST} />;\n\nLastUpdatedDuration.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedDuration };","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport { RadioGroupField } from '../';\nimport { assignedUserModeOptions } from '../../utils/options';\nconst NAME = 'assignedUserMode';\nconst DATATEST = 'input-assigned-user-mode';\nconst LABEL = i18n.t('Assigned user mode');\n\nconst AssignedUserMode = () => <RadioGroupField name={NAME} label={LABEL} options={assignedUserModeOptions} dataTest={DATATEST} />;\n\nexport { AssignedUserMode };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field } from '@dhis2/ui-forms';\nimport { UserPicker } from '../';\n\nconst SINGLE_USER_VALIDATOR = selectedUsers => selectedUsers.length == 0 ? i18n.t('At least one user must be selected') : undefined;\n\nconst SINGLE_EXACT_USER_VALIDATOR = selectedUsers => selectedUsers.length != 1 ? i18n.t('One user must be selected') : undefined;\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => <UserPicker meta={meta} selected={value} setSelected={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst UserPickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} validate={validator} {...rest} />;\n};\n\nUserPickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { UserPickerField, SINGLE_USER_VALIDATOR, SINGLE_EXACT_USER_VALIDATOR };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui-forms';\nimport { UserPickerField } from '../';\nimport { SINGLE_USER_VALIDATOR, SINGLE_EXACT_USER_VALIDATOR } from '../UserPicker/UserPickerField';\nconst NAME = 'selectedUsers';\nconst DATATEST = 'input-user-picker';\nconst LABEL = i18n.t('Users');\n\nconst UserPicker = ({\n  multiSelect,\n  show,\n  ...rest\n}) => {\n  const userValidator = multiSelect ? SINGLE_USER_VALIDATOR : SINGLE_EXACT_USER_VALIDATOR;\n  const validator = composeValidators(hasValue, userValidator);\n  return show && <UserPickerField name={NAME} multiSelect={multiSelect} autoSelectFirst={false} validator={validator} withActions={true} label={LABEL} dataTest={DATATEST} {...rest} />;\n};\n\nUserPicker.defaultProps = {\n  multiSelect: true\n};\nUserPicker.propTypes = {\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { UserPicker };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Switch } from '../';\nconst NAME = 'includeAllAttributes';\nconst DATATEST = 'input-include-all-attributes';\nconst LABEL = i18n.t('Include all attributes');\n\nconst IncludeAllAttributes = ({\n  value\n}) => <Switch name={NAME} label={LABEL} value={value} dataTest={DATATEST} />;\n\nIncludeAllAttributes.propTypes = {\n  value: PropTypes.bool.isRequired\n};\nexport { IncludeAllAttributes };","export const FORM_ERROR = 'FINAL_FORM/form-error';\nexport const ARRAY_ERROR = 'FINAL_FORM/array-error';","import i18n from '@dhis2/d2-i18n';\nimport { FORM_ERROR } from '../../utils/final-form';\nimport { uploadFile } from '../../utils/helper';\n\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    format,\n    identifier,\n    importReportMode,\n    preheatMode,\n    importStrategy,\n    atomicMode,\n    mergeMode,\n    flushMode,\n    skipSharing,\n    skipValidation,\n    inclusionStrategy,\n    isAsync,\n    firstRowIsHeader,\n    classKey\n  } = values; // send xhr\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'metadata.json';\n  const params = [`importMode=${dryRun ? 'VALIDATE' : 'COMMIT'}`, `identifier=${identifier.value}`, `importReportMode=${importReportMode.value}`, `preheatMode=${preheatMode.value}`, `importStrategy=${importStrategy.value}`, `atomicMode=${atomicMode.value}`, `mergeMode=${mergeMode.value}`, `flushMode=${flushMode.value}`, `skipSharing=${skipSharing}`, `skipValidation=${skipValidation}`, `inclusionStrategy=${inclusionStrategy.value}`, `async=${isAsync}`, `format=${format.value}`, format.value == 'csv' ? `firstRowIsHeader=${firstRowIsHeader}&classKey=${classKey.value}` : ''].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format.value,\n      type: 'METADATA_IMPORT',\n      setProgress,\n      addEntry: (id, entry) => addTask('metadata', id, { ...entry,\n        jobDetails: values\n      })\n    });\n  } catch (e) {\n    const formErrors = validate(values);\n    const allErrors = {\n      [FORM_ERROR]: [e],\n      ...formErrors\n    };\n    return allErrors;\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\n\nconst validate = values => {\n  const classKeyValidator = (format, classKey) => format.value == 'csv' && !classKey ? i18n.t('A class key must be selected') : undefined;\n\n  return {\n    classKey: classKeyValidator(values.format, values.classKey)\n  };\n};\n\nexport { onImport, validate };","import React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { Form } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPrevJobDetails } from '../../utils/helper';\nimport { formatOptions, defaultFormatOption, defaultIdentifierOption, defaultImportReportModeOption, defaultPreheatModeOption, defaultImportStrategyOption, defaultAtomicModeOption, defaultMergeModeOption, defaultFlushModeOption, defaultInclusionStrategyOption } from '../../utils/options';\nimport { FileUpload, Format, FirstRowIsHeader, ClassKey, Identifier, ImportReportMode, PreheatMode, ImportStrategy, AtomicMode, MergeMode, FlushMode, SkipSharing, SkipValidation, IsAsync, InclusionStrategy, ImportButtonStrip, FormAlerts } from '../../components/Inputs';\nimport { Page, MetadataImportIcon, MoreOptions } from '../../components/';\nimport { TaskContext, getNewestTask } from '../../contexts/';\nimport { onImport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Metadata import');\nconst PAGE_DESCRIPTION = i18n.t('Import metadata like data elements and organisation units using the DXF 2 format.');\nconst PAGE_ICON = <MetadataImportIcon />;\n\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  identifier: prevJobDetails.identifier || defaultIdentifierOption,\n  importReportMode: prevJobDetails.importReportMode || defaultImportReportModeOption,\n  preheatMode: prevJobDetails.preheatMode || defaultPreheatModeOption,\n  importStrategy: prevJobDetails.importStrategy || defaultImportStrategyOption,\n  firstRowIsHeader: !!prevJobDetails.firstRowIsHeader,\n  atomicMode: prevJobDetails.atomicMode || defaultAtomicModeOption,\n  mergeMode: prevJobDetails.mergeMode || defaultMergeModeOption,\n  flushMode: prevJobDetails.flushMode || defaultFlushModeOption,\n  inclusionStrategy: prevJobDetails.inclusionStrategy || defaultInclusionStrategyOption,\n  skipSharing: !!prevJobDetails.skipSharing,\n  skipValidation: !!prevJobDetails.skipValidation,\n  isAsync: !prevJobDetails.isAsync\n});\n\nconst MetadataImport = () => {\n  const {\n    tasks: {\n      metadata: metadataTasks\n    },\n    addTask\n  } = useContext(TaskContext); // recreating a previously run job\n\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, metadataTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} loading={progress} dataTest=\"page-import-metadata\" summaryTask={getNewestTask(metadataTasks)} showFullSummaryTask={showFullSummaryTask}>\n            <Form onSubmit={onSubmit} initialValues={initialValues} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <FileUpload />\n                        <Format availableFormats={formatOptions} />\n                        <FirstRowIsHeader show={values.format.value == 'csv'} value={values.firstRowIsHeader} />\n                        <ClassKey show={values.format.value == 'csv'} form={form} prevValue={prevJobDetails.classKey} />\n                        <Identifier />\n                        <ImportReportMode />\n                        <PreheatMode />\n                        <ImportStrategy />\n                        <AtomicMode />\n                        <MergeMode />\n                        <MoreOptions>\n                            <FlushMode />\n                            <SkipSharing value={values.skipSharing} />\n                            <SkipValidation value={values.skipValidation} />\n                            <IsAsync value={values.isAsync} />\n                            <InclusionStrategy />\n                        </MoreOptions>\n                        <ImportButtonStrip form={form} />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { MetadataImport };","import React from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Form } from '@dhis2/ui-forms';\nimport { formatOptions, compressionOptions, defaultFormatOption, defaultCompressionOption } from '../../utils/options';\nimport { Format, Schemas, Compression, SkipSharing, ExportButton } from '../../components/Inputs';\nimport { Page, MetadataExportIcon } from '../../components/';\nimport { onExport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Metadata export');\nconst PAGE_DESCRIPTION = i18n.t('Export meta data like data elements and organisation units in the XML, JSON or CSV format.');\nconst PAGE_ICON = <MetadataExportIcon />;\nconst initialValues = {\n  checkedSchemas: [],\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  skipSharing: false\n};\n\nconst MetadataExport = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl);\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"page-export-metadata\">\n            <Form onSubmit={onSubmit} initialValues={initialValues} render={({\n      handleSubmit,\n      form,\n      values\n    }) => <form onSubmit={handleSubmit}>\n                        <Schemas />\n                        <Format availableFormats={formatOptions} />\n                        <Compression availableCompressions={compressionOptions} />\n                        <SkipSharing value={values.skipSharing} />\n                        <ExportButton />\n                    </form>} />\n        </Page>;\n};\n\nexport { MetadataExport };","import { locationAssign } from '../../utils/helper';\n\nconst onExport = baseUrl => values => {\n  const {\n    checkedSchemas,\n    format,\n    compression,\n    skipSharing\n  } = values; // generate download url\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = `metadata`;\n  const endpointExtension = compression.value ? `${format.value}.${compression.value}` : format.value;\n  const schemaParams = checkedSchemas.map(name => `${name}=true`).join('&');\n  const downloadUrlParams = `skipSharing=${skipSharing}&download=true&${schemaParams}`;\n  const url = `${apiBaseUrl}${endpoint}.${endpointExtension}?${downloadUrlParams}`;\n  locationAssign(url);\n};\n\nexport { onExport };","import React from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Form } from '@dhis2/ui-forms';\nimport { formatNoCsvOptions, compressionOptions, defaultFormatOption, defaultCompressionOption, defaultObjectTypeOption } from '../../utils/options';\nimport { Format, Compression, ObjectType, Objects, SkipSharing, ExportButton } from '../../components/Inputs';\nimport { Page, MetadataDependencyExportIcon } from '../../components/';\nimport { onExport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Metadata dependency export');\nconst PAGE_DESCRIPTION = i18n.t('Export metadata like data sets and programs including related metadata objects in the XML or JSON format.');\nconst PAGE_ICON = <MetadataDependencyExportIcon />;\nconst initialValues = {\n  objectType: defaultObjectTypeOption,\n  object: undefined,\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  skipSharing: false\n};\n\nconst MetadataDependencyExport = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl);\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"page-export-metadata-dependency\">\n            <Form onSubmit={onSubmit} initialValues={initialValues} render={({\n      handleSubmit,\n      form,\n      values\n    }) => <form onSubmit={handleSubmit}>\n                        <ObjectType />\n                        <Objects objectType={values.objectType} form={form} />\n                        <Format availableFormats={formatNoCsvOptions} />\n                        <Compression availableCompressions={compressionOptions} />\n                        <SkipSharing value={values.skipSharing} />\n                        <ExportButton />\n                    </form>} />\n        </Page>;\n};\n\nexport { MetadataDependencyExport };","import { locationAssign } from '../../utils/helper';\n\nconst onExport = baseUrl => values => {\n  const {\n    objectType,\n    object,\n    format,\n    compression,\n    skipSharing\n  } = values;\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = `${objectType.value}/${object.value}/metadata`;\n  const endpointExtension = compression.value ? `${format.value}.${compression.value}` : format.value;\n  const downloadUrlParams = `skipSharing=${skipSharing}&download=true`;\n  const url = `${apiBaseUrl}${endpoint}.${endpointExtension}?${downloadUrlParams}`;\n  locationAssign(url);\n};\n\nexport { onExport };","import React, { useContext } from 'react';\nimport i18n from '@dhis2/d2-i18n';\nimport styles from './JobOverview.module.css';\nimport { TaskContext } from '../../contexts/';\nimport { JobOverview as JobOverviewComponent, Page, TasksIcon } from '../../components/';\n\nconst JobOverview = () => {\n  const {\n    jobOverview,\n    updateJobOverview\n  } = useContext(TaskContext);\n\n  const setActiveTypes = types => {\n    updateJobOverview({\n      activeTypes: types\n    });\n  };\n\n  const setSelectedJob = job => {\n    updateJobOverview({\n      selectedJob: job\n    });\n  };\n\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"job-overview-page\">\n            <div className={styles.container}>\n                <JobOverviewComponent activeTypes={jobOverview.activeTypes} setActiveTypes={setActiveTypes} selectedJob={jobOverview.selectedJob} setSelectedJob={setSelectedJob} />\n            </div>\n        </Page>;\n}; // PAGE INFO\n\n\nconst PAGE_NAME = i18n.t('Job overview');\nconst PAGE_DESCRIPTION = i18n.t('An overview of all import jobs started this session.');\nconst PAGE_ICON = <TasksIcon />;\nexport { JobOverview };","import React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { Form } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPrevJobDetails } from '../../utils/helper';\nimport { FileUpload, ImportButtonStrip, FormAlerts } from '../../components/Inputs/';\nimport { Page, GMLIcon } from '../../components/';\nimport { TaskContext, getNewestTask } from '../../contexts/';\nimport { onImport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('GML import');\nconst PAGE_DESCRIPTION = i18n.t('Import geographic data for organisation units using the GML format. GML is an XML grammar for expressing geographical features.');\nconst PAGE_ICON = <GMLIcon />;\n\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files\n});\n\nconst GMLImport = () => {\n  const {\n    tasks: {\n      gml: gmlTasks\n    },\n    addTask\n  } = useContext(TaskContext); // recreating a previously run job\n\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, gmlTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} loading={progress} dataTest=\"page-import-gml\" summaryTask={getNewestTask(gmlTasks)} showFullSummaryTask={showFullSummaryTask}>\n            <Form onSubmit={onSubmit} initialValues={initialValues} render={({\n      handleSubmit,\n      form,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <FileUpload />\n                        <ImportButtonStrip form={form} />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { GMLImport };","import { FORM_ERROR } from '../../utils/final-form';\nimport { uploadFile } from '../../utils/helper';\n\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files\n  } = values; // send xhr\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'metadata/gml.json';\n  const params = [`dryRun=${dryRun}`, 'format=json'].join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: 'gml',\n      type: 'GML_IMPORT',\n      setProgress,\n      addEntry: (id, entry) => addTask('gml', id, { ...entry,\n        jobDetails: values\n      })\n    });\n  } catch (e) {\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\n\nexport { onImport };","import React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { Form } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPrevJobDetails } from '../../utils/helper';\nimport { formatOptions, defaultFormatOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultEventIdSchemeOption, defaultIdSchemeOption } from '../../utils/options';\nimport { FileUpload, Format, DataElementIdScheme, EventIdScheme, IdScheme, OrgUnitIdScheme, ImportButtonStrip, FormAlerts } from '../../components/Inputs';\nimport { Page, MoreOptions, EventIcon } from '../../components/';\nimport { TaskContext, getNewestTask } from '../../contexts/';\nimport { onImport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Event import');\nconst PAGE_DESCRIPTION = i18n.t('Import events for programs, stages and tracked entities using the DXF 2 format.');\nconst PAGE_ICON = <EventIcon />;\n\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  eventIdScheme: prevJobDetails.eventIdScheme || defaultEventIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption\n});\n\nconst EventImport = () => {\n  const {\n    tasks: {\n      event: eventTasks\n    },\n    addTask\n  } = useContext(TaskContext); // recreating a previously run job\n\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, eventTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} loading={progress} dataTest=\"page-import-event\" summaryTask={getNewestTask(eventTasks)} showFullSummaryTask={showFullSummaryTask}>\n            <Form onSubmit={onSubmit} initialValues={initialValues} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <FileUpload />\n                        <Format availableFormats={formatOptions} />\n                        <MoreOptions>\n                            <EventIdScheme />\n                            <DataElementIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                        </MoreOptions>\n                        <ImportButtonStrip form={form} />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { EventImport };","import { FORM_ERROR } from '../../utils/final-form';\nimport { uploadFile } from '../../utils/helper';\n\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    format,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    eventIdScheme,\n    idScheme\n  } = values; // send xhr\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'events.json';\n  const params = ['skipFirst=true', 'async=true', `dryRun=${dryRun}`, `dataElementIdScheme=${dataElementIdScheme.value}`, `orgUnitIdScheme=${orgUnitIdScheme.value}`, `eventIdScheme=${eventIdScheme.value}`, `idScheme=${idScheme.value}`, `payloadFormat=${format.value}`].join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format.value,\n      type: 'EVENT_IMPORT',\n      setProgress,\n      addEntry: (id, entry) => addTask('event', id, { ...entry,\n        jobDetails: values\n      })\n    });\n  } catch (e) {\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\n\nexport { onImport };","import { jsDateToISO8601, locationAssign, pathToId } from '../../utils/helper';\nimport { ALL_VALUE } from '../../hooks/useProgramStages';\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField';\n\nconst onExport = baseUrl => values => {\n  const {\n    selectedOrgUnits,\n    selectedPrograms,\n    programStage,\n    format,\n    compression,\n    startDate,\n    endDate,\n    includeDeleted,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    idScheme,\n    inclusion\n  } = values; // generate URL and redirect\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = `events`;\n  const endpointExtension = compression.value ? `${format.value}.${compression.value}` : format.value;\n  const filename = `${endpoint}.${endpointExtension}`;\n  const downloadUrlParams = ['links=false', 'skipPaging=true', `orgUnit=${pathToId(selectedOrgUnits[0])}`, `program=${selectedPrograms[0]}`, `includeDeleted=${includeDeleted}`, `dataElementIdScheme=${dataElementIdScheme.value}`, `orgUnitIdScheme=${orgUnitIdScheme.value}`, `idScheme=${idScheme.value}`, `attachment=${filename}`, `startDate=${jsDateToISO8601(startDate)}`, `endDate=${jsDateToISO8601(endDate)}`, `ouMode=${inclusion.value}`, `format=${format.value}`, programStage.value != ALL_VALUE ? `programStage=${programStage.value}` : ''].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}.${endpointExtension}?${downloadUrlParams}`;\n  locationAssign(url);\n};\n\nconst validate = values => ({\n  startDate: DATE_BEFORE_VALIDATOR(values.startDate, values.endDate),\n  endDate: DATE_AFTER_VALIDATOR(values.endDate, values.startDate)\n});\n\nexport { onExport, validate };","import React from 'react';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Form } from '@dhis2/ui-forms';\nimport { formatOptions, compressionOptions, defaultFormatOption, defaultCompressionOption, defaultIdSchemeOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultInclusionOption } from '../../utils/options';\nimport { OrgUnitTree, ProgramPicker, Format, Compression, StartDate, EndDate, IncludeDeleted, Inclusion, ExportButton, ProgramStages, DataElementIdScheme, OrgUnitIdScheme, IdScheme } from '../../components/Inputs';\nimport { Page, MoreOptions, EventIcon } from '../../components/';\nimport { onExport, validate } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Event export');\nconst PAGE_DESCRIPTION = i18n.t('Export event data for programs, stages and tracked entities in the DXF 2 format.');\nconst PAGE_ICON = <EventIcon />;\nconst today = new Date();\nconst initialValues = {\n  selectedOrgUnits: [],\n  selectedPrograms: [],\n  programStage: undefined,\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  startDate: new Date(today.getFullYear(), today.getMonth() - 3, today.getDate()),\n  endDate: today,\n  includeDeleted: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption,\n  inclusion: defaultInclusionOption\n};\n\nconst EventExport = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl);\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"page-export-data\">\n            <Form onSubmit={onSubmit} initialValues={initialValues} validate={validate} subscription={{\n      values: true\n    }} render={({\n      handleSubmit,\n      form,\n      values\n    }) => <form onSubmit={handleSubmit}>\n                        <OrgUnitTree multiSelect={false} />\n                        <ProgramPicker autoSelectFirst />\n                        <ProgramStages selectedPrograms={values.selectedPrograms} form={form} />\n                        <StartDate />\n                        <EndDate />\n                        <Format availableFormats={formatOptions} />\n                        <Compression availableCompressions={compressionOptions} />\n                        <MoreOptions>\n                            <IncludeDeleted value={values.includeDeleted} />\n                            <DataElementIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                            <Inclusion />\n                        </MoreOptions>\n                        <ExportButton />\n                    </form>} />\n        </Page>;\n};\n\nexport { EventExport };","import React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { Form } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPrevJobDetails } from '../../utils/helper';\nimport { formatAdxPdfOptions, defaultFormatOption, defaultStrategyOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultIdSchemeOption } from '../../utils/options';\nimport { FileUpload, Format, FirstRowIsHeader, Strategy, PreheatCache, SkipAudit, SkipExistingCheck, DataElementIdScheme, IdScheme, OrgUnitIdScheme, ImportButtonStrip, FormAlerts } from '../../components/Inputs';\nimport { hasAuthorityToSkipAudit } from '../../components/WithAuthority/predicates';\nimport { Page, WithAuthority, MoreOptions, DataIcon } from '../../components/';\nimport { TaskContext, getNewestTask } from '../../contexts/';\nimport { onImport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Data import');\nconst PAGE_DESCRIPTION = i18n.t('Import data values from ADX XML, DXF 2 XML, JSON, CSV or PDF files.');\nconst PAGE_ICON = <DataIcon />;\n\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  strategy: prevJobDetails.strategy || defaultStrategyOption,\n  firstRowIsHeader: !!prevJobDetails.firstRowIsHeader,\n  preheatCache: !!prevJobDetails.preheatCache,\n  skipAudit: !!prevJobDetails.skipAudit,\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption,\n  skipExistingCheck: !!prevJobDetails.skipExistingCheck\n});\n\nconst DataImport = () => {\n  const {\n    tasks: {\n      data: dataTasks\n    },\n    addTask\n  } = useContext(TaskContext); // recreating a previously run job\n\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, dataTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} loading={progress} dataTest=\"page-import-data\" summaryTask={getNewestTask(dataTasks)} showFullSummaryTask={showFullSummaryTask}>\n            <Form onSubmit={onSubmit} initialValues={initialValues} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <FileUpload />\n                        <Format availableFormats={formatAdxPdfOptions} />\n                        <FirstRowIsHeader show={values.format.value == 'csv'} value={values.firstRowIsHeader} />\n                        <Strategy />\n                        <PreheatCache value={values.preheatCache} />\n                        <WithAuthority pred={hasAuthorityToSkipAudit}>\n                            <SkipAudit value={values.skipAudit} />\n                        </WithAuthority>\n                        <MoreOptions>\n                            <DataElementIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                            <SkipExistingCheck value={values.skipExistingCheck} />\n                        </MoreOptions>\n                        <ImportButtonStrip form={form} />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { DataImport };","import { FORM_ERROR } from '../../utils/final-form';\nimport { uploadFile } from '../../utils/helper';\n\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    strategy,\n    preheatCache,\n    skipAudit,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    idScheme,\n    skipExistingCheck,\n    format,\n    firstRowIsHeader\n  } = values; // send xhr\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'dataValueSets.json';\n  const params = ['async=true', `dryRun=${dryRun}`, `strategy=${strategy.value}`, `preheatCache=${preheatCache}`, `skipAudit=${skipAudit}`, `dataElementIdScheme=${dataElementIdScheme.value}`, `orgUnitIdScheme=${orgUnitIdScheme.value}`, `idScheme=${idScheme.value}`, `skipExistingCheck=${skipExistingCheck}`, `format=${format.value}`, format == 'csv' ? `firstRowIsHeader=${firstRowIsHeader}` : ''].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format.value,\n      type: 'DATAVALUE_IMPORT',\n      setProgress,\n      addEntry: (id, entry) => addTask('data', id, { ...entry,\n        jobDetails: values\n      })\n    });\n  } catch (e) {\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\n\nexport { onImport };","import i18n from '@dhis2/d2-i18n';\nimport JSZip from 'jszip';\nimport { FORM_ERROR } from '../../utils/final-form';\nimport { createBlob, downloadBlob, jsDateToISO8601, pathToId } from '../../utils/helper';\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField';\nconst dataValueSetQuery = {\n  sets: {\n    resource: 'dataValueSets',\n    params: ({\n      dataElementIdScheme,\n      orgUnitIdScheme,\n      idScheme,\n      includeDeleted,\n      children,\n      startDate,\n      endDate,\n      orgUnit,\n      dataSet,\n      format\n    }) => ({\n      dataElementIdScheme,\n      orgUnitIdScheme,\n      idScheme,\n      includeDeleted,\n      children,\n      startDate,\n      endDate,\n      orgUnit,\n      dataSet,\n      format\n    })\n  }\n};\n\nconst onExport = engine => async values => {\n  const {\n    selectedOrgUnits,\n    includeChildren,\n    selectedDataSets,\n    format,\n    compression,\n    startDate,\n    endDate,\n    includeDeleted,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    idScheme\n  } = values; // fetch data\n\n  try {\n    const {\n      sets\n    } = await engine.query(dataValueSetQuery, {\n      variables: {\n        dataElementIdScheme: dataElementIdScheme.value,\n        orgUnitIdScheme: orgUnitIdScheme.value,\n        idScheme: idScheme.value,\n        includeDeleted: includeDeleted.toString(),\n        children: includeChildren.toString(),\n        startDate: jsDateToISO8601(startDate),\n        endDate: jsDateToISO8601(endDate),\n        orgUnit: selectedOrgUnits.map(o => pathToId(o)),\n        dataSet: selectedDataSets,\n        format: format.value\n      }\n    });\n    const dataStr = format.value === 'json' ? JSON.stringify(sets) : sets;\n    const filename = `data.${format.value}`;\n\n    if (compression.value !== '') {\n      const zip = new JSZip();\n      zip.file(filename, dataStr);\n      zip.generateAsync({\n        type: 'blob'\n      }).then(content => {\n        const url = URL.createObjectURL(content);\n        downloadBlob(url, `${filename}.${compression.value}`);\n      });\n    } else {\n      const url = createBlob(dataStr, format.value);\n      downloadBlob(url, filename);\n    }\n  } catch (error) {\n    const errors = [{\n      id: `http-${new Date().getTime()}`,\n      critical: true,\n      message: `${i18n.t('HTTP error when fetching data')}. ${error.message}`\n    }];\n    console.error('DataExport onExport error: ', error);\n    return {\n      [FORM_ERROR]: errors\n    };\n  }\n};\n\nconst validate = values => ({\n  startDate: DATE_BEFORE_VALIDATOR(values.startDate, values.endDate),\n  endDate: DATE_AFTER_VALIDATOR(values.endDate, values.startDate)\n});\n\nexport { onExport, validate };","import React from 'react';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Form } from '@dhis2/ui-forms';\nimport { formatAdxOptions, compressionOptions, defaultFormatOption, defaultCompressionOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultIdSchemeOption } from '../../utils/options';\nimport { OrgUnitTree, IncludeChildren, DataSetPicker, Format, Compression, StartDate, EndDate, IncludeDeleted, DataElementIdScheme, IdScheme, OrgUnitIdScheme, ExportButton, FormAlerts } from '../../components/Inputs';\nimport { Page, MoreOptions, DataIcon } from '../../components/';\nimport { onExport, validate } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Data export');\nconst PAGE_DESCRIPTION = i18n.t('Export data values as ADX XML, DFX 2 XML, JSON or CSV files.');\nconst PAGE_ICON = <DataIcon />;\nconst today = new Date();\nconst initialValues = {\n  selectedOrgUnits: [],\n  includeChildren: true,\n  selectedDataSets: [],\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  startDate: new Date(today.getFullYear(), today.getMonth() - 3, today.getDate()),\n  endDate: today,\n  includeDeleted: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption\n};\n\nconst DataExport = () => {\n  const engine = useDataEngine();\n  const onSubmit = onExport(engine);\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"page-export-data\">\n            <Form onSubmit={onSubmit} initialValues={initialValues} validate={validate} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <OrgUnitTree />\n                        <IncludeChildren value={values.includeChildren} />\n                        <DataSetPicker />\n                        <Format availableFormats={formatAdxOptions} />\n                        <Compression availableCompressions={compressionOptions} />\n                        <StartDate />\n                        <EndDate />\n                        <MoreOptions>\n                            <IncludeDeleted value={values.includeDeleted} />\n                            <DataElementIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                        </MoreOptions>\n                        <ExportButton />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { DataExport };","import i18n from '@dhis2/d2-i18n';\nimport JSZip from 'jszip';\nimport { FORM_ERROR } from '../../utils/final-form';\nimport { createBlob, downloadBlob, jsDateToISO8601, pathToId } from '../../utils/helper';\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField'; // calculate minimum set of parameters based on given filters\n\nconst minimizeParams = ({\n  selectedOrgUnits,\n  selectedUsers,\n  selectedPrograms,\n  selectedTETypes,\n  ouMode,\n  format,\n  includeDeleted,\n  includeAllAttributes,\n  dataElementIdScheme,\n  eventIdScheme,\n  orgUnitIdScheme,\n  idScheme,\n  assignedUserMode,\n  teiTypeFilter,\n  programStatus,\n  followUpStatus,\n  programStartDate,\n  programEndDate,\n  lastUpdatedFilter,\n  lastUpdatedStartDate,\n  lastUpdatedEndDate,\n  lastUpdatedDuration\n}) => {\n  // [base] always include\n  const minParams = {\n    ou: selectedOrgUnits.map(o => pathToId(o)).join(';'),\n    ouMode: ouMode.value,\n    format: format.value,\n    includeDeleted: includeDeleted.toString(),\n    includeAllAttributes: includeAllAttributes.toString(),\n    dataElementIdScheme: dataElementIdScheme.value,\n    eventIdScheme: eventIdScheme.value,\n    orgUnitIdScheme: orgUnitIdScheme.value,\n    idScheme: idScheme.value,\n    assignedUserMode: assignedUserMode.value\n  }; // include if assignedUserMode == PROVIDED\n\n  if (assignedUserMode.value == 'PROVIDED') {\n    Object.assign(minParams, {\n      assignedUser: selectedUsers.join(';')\n    });\n  } // include if teiTypeFilter == PROGRAM\n\n\n  if (teiTypeFilter.value == 'PROGRAM') {\n    // always\n    Object.assign(minParams, {\n      program: selectedPrograms[0],\n      programStatus: programStatus.value,\n      followUpStatus: followUpStatus.value\n    }); // if given\n\n    if (programStartDate) {\n      Object.assign(minParams, {\n        programStartDate: jsDateToISO8601(programStartDate)\n      });\n    } // if given\n\n\n    if (programEndDate) {\n      Object.assign(minParams, {\n        programEndDate: jsDateToISO8601(programEndDate)\n      });\n    }\n  } // include if teiTypeFilter == TE\n\n\n  if (teiTypeFilter.value == 'TE') {\n    Object.assign(minParams, {\n      trackedEntity: selectedTETypes[0]\n    });\n  } // include if lastUpdatedFilter == DATE\n\n\n  if (lastUpdatedFilter.value == 'DATE') {\n    // if given\n    if (lastUpdatedStartDate) {\n      Object.assign(minParams, {\n        lastUpdatedStartDate: jsDateToISO8601(lastUpdatedStartDate)\n      });\n    } // if given\n\n\n    if (lastUpdatedEndDate) {\n      Object.assign(minParams, {\n        lastUpdatedEndDate: jsDateToISO8601(lastUpdatedEndDate)\n      });\n    }\n  } // include if lastUpdatedFilter == DURATION\n\n\n  if (lastUpdatedFilter.value == 'DURATION') {\n    Object.assign(minParams, {\n      lastUpdatedDuration: lastUpdatedDuration\n    });\n  }\n\n  return minParams;\n};\n\nconst teiQuery = {\n  sets: {\n    resource: 'trackedEntityInstances',\n    params: x => x\n  }\n};\n\nconst onExport = engine => async values => {\n  const {\n    format,\n    compression\n  } = values; // fetch data\n\n  try {\n    const {\n      sets: teis\n    } = await engine.query(teiQuery, {\n      variables: minimizeParams(values)\n    });\n    const teiStr = format.value === 'json' ? JSON.stringify(teis) : teis;\n    const filename = `trackedEntityInstances.${format.value}`;\n\n    if (compression.value !== '') {\n      const zip = new JSZip();\n      zip.file(filename, teiStr);\n      zip.generateAsync({\n        type: 'blob'\n      }).then(content => {\n        const url = URL.createObjectURL(content);\n        downloadBlob(url, `${filename}.${compression.value}`);\n      });\n    } else {\n      const url = createBlob(teiStr, format.value);\n      downloadBlob(url, filename);\n    }\n  } catch (error) {\n    const errors = [{\n      id: `http-${new Date().getTime()}`,\n      critical: true,\n      message: `${i18n.t('HTTP error when fetching tracked entity instances')}. ${error.message}`\n    }];\n    console.error('TEIExport onExport error: ', error);\n    return {\n      [FORM_ERROR]: errors\n    };\n  }\n};\n\nconst validate = values => {\n  const ret = {};\n\n  if (values.teiTypeFilter.value == 'PROGRAM' && values.programStartDate && values.programEndDate) {\n    Object.assign(ret, {\n      programStartDate: DATE_BEFORE_VALIDATOR(values.programStartDate, values.programEndDate),\n      programEndDate: DATE_AFTER_VALIDATOR(values.programEndDate, values.programStartDate)\n    });\n  }\n\n  if (values.lastUpdatedFilter.value == 'DATE' && values.lastUpdatedStartDate && values.lastUpdatedEndDate) {\n    Object.assign(ret, {\n      lastUpdatedStartDate: DATE_BEFORE_VALIDATOR(values.lastUpdatedStartDate, values.lastUpdatedEndDate),\n      lastUpdatedEndDate: DATE_AFTER_VALIDATOR(values.lastUpdatedEndDate, values.lastUpdatedStartDate)\n    });\n  }\n\n  if (values.lastUpdatedFilter.value == 'DATE' && !values.lastUpdatedStartDate && !values.lastUpdatedEndDate) {\n    Object.assign(ret, {\n      lastUpdatedEndDate: i18n.t(\"At least one of the '{{lastUpdated}}' date fields must be specified\", {\n        lastUpdated: 'last updated'\n      })\n    });\n  }\n\n  return ret;\n};\n\nexport { onExport, validate };","import React from 'react';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Form } from '@dhis2/ui-forms';\nimport { formatJsonpOptions, compressionOptions, defaultFormatOption, defaultOrgUnitSelectionModeOption, defaultTEITypeFilterOption, defaultProgramStatusOption, defaultFollowUpStatusOption, defaultCompressionOption, defaultLastUpdatedFilterOption, defaultAssignedUserModeOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultIdSchemeOption, defaultEventIdSchemeOption } from '../../utils/options';\nimport { Format, OrgUnitTree, OrgUnitMode, TEITypeFilter, ProgramStatus, FollowUpStatus, ProgramStartDate, ProgramEndDate, ProgramPicker, TETypePicker, Compression, LastUpdatedFilter, LastUpdatedStartDate, LastUpdatedEndDate, LastUpdatedDuration, AssignedUserMode, UserPicker, IncludeDeleted, IncludeAllAttributes, DataElementIdScheme, EventIdScheme, IdScheme, OrgUnitIdScheme, ExportButton, FormAlerts } from '../../components/Inputs';\nimport { Page, MoreOptions, TEIIcon } from '../../components/';\nimport { onExport, validate } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Tracked entity instances export');\nconst PAGE_DESCRIPTION = i18n.t('Export tracked entity instances in the XML, JSON, JSONP or CSV format.');\nconst PAGE_ICON = <TEIIcon />;\nconst initialValues = {\n  selectedOrgUnits: [],\n  selectedPrograms: [],\n  selectedTETypes: [],\n  selectedUsers: [],\n  format: defaultFormatOption,\n  ouMode: defaultOrgUnitSelectionModeOption,\n  teiTypeFilter: defaultTEITypeFilterOption,\n  programStatus: defaultProgramStatusOption,\n  followUpStatus: defaultFollowUpStatusOption,\n  programStartDate: '',\n  programEndDate: '',\n  compression: defaultCompressionOption,\n  lastUpdatedFilter: defaultLastUpdatedFilterOption,\n  lastUpdatedStartDate: '',\n  lastUpdatedEndDate: '',\n  lastUpdatedDuration: '',\n  assignedUserMode: defaultAssignedUserModeOption,\n  includeDeleted: false,\n  includeAllAttributes: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  eventIdScheme: defaultEventIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption\n};\n\nconst TEIExport = () => {\n  const engine = useDataEngine();\n  const onSubmit = onExport(engine);\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} dataTest=\"page-export-tei\">\n            <Form onSubmit={onSubmit} initialValues={initialValues} validate={validate} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <OrgUnitTree />\n                        <OrgUnitMode />\n                        <TEITypeFilter />\n                        <ProgramPicker show={values.teiTypeFilter.value == 'PROGRAM'} />\n                        <ProgramStatus show={values.teiTypeFilter.value == 'PROGRAM'} />\n                        <FollowUpStatus show={values.teiTypeFilter.value == 'PROGRAM'} />\n                        <ProgramStartDate show={values.teiTypeFilter.value == 'PROGRAM'} />\n                        <ProgramEndDate show={values.teiTypeFilter.value == 'PROGRAM'} />\n                        <TETypePicker show={values.teiTypeFilter.value == 'TE'} />\n                        <Format availableFormats={formatJsonpOptions} />\n                        <Compression availableCompressions={compressionOptions} />\n                        <MoreOptions>\n                            <LastUpdatedFilter />\n                            <LastUpdatedStartDate show={values.lastUpdatedFilter.value == 'DATE'} />\n                            <LastUpdatedEndDate show={values.lastUpdatedFilter.value == 'DATE'} />\n                            <LastUpdatedDuration show={values.lastUpdatedFilter.value == 'DURATION'} />\n                            <AssignedUserMode />\n                            <UserPicker show={values.assignedUserMode.value == 'PROVIDED'} />\n                            <IncludeDeleted value={values.includeDeleted} />\n                            <IncludeAllAttributes value={values.includeAllAttributes} />\n                            <DataElementIdScheme />\n                            <EventIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                        </MoreOptions>\n                        <ExportButton />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { TEIExport };","import { FORM_ERROR } from '../../utils/final-form';\nimport { uploadFile } from '../../utils/helper';\n\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    format,\n    identifier,\n    importReportMode,\n    preheatMode,\n    importStrategy,\n    atomicMode,\n    mergeMode,\n    flushMode,\n    skipSharing,\n    skipValidation,\n    inclusionStrategy,\n    isAsync,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    eventIdScheme,\n    idScheme\n  } = values; // send xhr\n\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'trackedEntityInstances.json';\n  const params = [`importMode=${dryRun ? 'VALIDATE' : 'COMMIT'}`, `identifier=${identifier.value}`, `importReportMode=${importReportMode.value}`, `preheatMode=${preheatMode.value}`, `importStrategy=${importStrategy.value}`, `atomicMode=${atomicMode.value}`, `mergeMode=${mergeMode.value}`, `flushMode=${flushMode.value}`, `skipSharing=${skipSharing}`, `skipValidation=${skipValidation}`, `inclusionStrategy=${inclusionStrategy.value}`, `async=${isAsync}`, `format=${format.value}`, `dataElementIdScheme=${dataElementIdScheme.value}`, `orgUnitIdScheme=${orgUnitIdScheme.value}`, `eventIdScheme=${eventIdScheme.value}`, `idScheme=${idScheme.value}`].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format.value,\n      type: 'TEI_IMPORT',\n      setProgress,\n      addEntry: (id, entry) => addTask('tei', id, { ...entry,\n        jobDetails: values\n      })\n    });\n  } catch (e) {\n    const formErrors = validate(values);\n    const allErrors = {\n      [FORM_ERROR]: [e],\n      ...formErrors\n    };\n    return allErrors;\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\n\nconst validate = () => {\n  return {};\n};\n\nexport { onImport, validate };","import React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { Form } from '@dhis2/ui-forms';\nimport i18n from '@dhis2/d2-i18n';\nimport { getPrevJobDetails } from '../../utils/helper';\nimport { formatNoCsvOptions, defaultFormatOption, defaultIdentifierOption, defaultImportReportModeOption, defaultPreheatModeOption, defaultImportStrategyOption, defaultAtomicModeOption, defaultMergeModeOption, defaultFlushModeOption, defaultInclusionStrategyOption, defaultDataElementIdSchemeOption, defaultOrgUnitIdSchemeOption, defaultIdSchemeOption, defaultEventIdSchemeOption } from '../../utils/options';\nimport { FileUpload, Format, Identifier, ImportReportMode, PreheatMode, ImportStrategy, AtomicMode, MergeMode, FlushMode, SkipSharing, SkipValidation, IsAsync, InclusionStrategy, ImportButtonStrip, FormAlerts, DataElementIdScheme, EventIdScheme, IdScheme, OrgUnitIdScheme } from '../../components/Inputs';\nimport { Page, TEIIcon, MoreOptions } from '../../components/';\nimport { TaskContext, getNewestTask } from '../../contexts/';\nimport { onImport } from './form-helper'; // PAGE INFO\n\nconst PAGE_NAME = i18n.t('Tracked entity instances import');\nconst PAGE_DESCRIPTION = i18n.t('Import tracked entity instances from JSON or XML files.');\nconst PAGE_ICON = <TEIIcon />;\n\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  identifier: prevJobDetails.identifier || defaultIdentifierOption,\n  importReportMode: prevJobDetails.importReportMode || defaultImportReportModeOption,\n  preheatMode: prevJobDetails.preheatMode || defaultPreheatModeOption,\n  importStrategy: prevJobDetails.importStrategy || defaultImportStrategyOption,\n  atomicMode: prevJobDetails.atomicMode || defaultAtomicModeOption,\n  mergeMode: prevJobDetails.mergeMode || defaultMergeModeOption,\n  flushMode: prevJobDetails.flushMode || defaultFlushModeOption,\n  inclusionStrategy: prevJobDetails.inclusionStrategy || defaultInclusionStrategyOption,\n  skipSharing: !!prevJobDetails.skipSharing,\n  skipValidation: !!prevJobDetails.skipValidation,\n  isAsync: !prevJobDetails.isAsync,\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  eventIdScheme: prevJobDetails.eventIdScheme || defaultEventIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption\n});\n\nconst TEIImport = () => {\n  const {\n    tasks: {\n      tei: teiTasks\n    },\n    addTask\n  } = useContext(TaskContext); // recreating a previously run job\n\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, teiTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return <Page title={PAGE_NAME} desc={PAGE_DESCRIPTION} icon={PAGE_ICON} loading={progress} dataTest=\"page-import-tei\" summaryTask={getNewestTask(teiTasks)} showFullSummaryTask={showFullSummaryTask}>\n            <Form onSubmit={onSubmit} initialValues={initialValues} subscription={{\n      values: true,\n      submitError: true\n    }} render={({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => <form onSubmit={handleSubmit}>\n                        <FileUpload />\n                        <Format availableFormats={formatNoCsvOptions} />\n                        <Identifier />\n                        <ImportReportMode />\n                        <PreheatMode />\n                        <ImportStrategy />\n                        <AtomicMode />\n                        <MergeMode />\n                        <MoreOptions>\n                            <FlushMode />\n                            <SkipSharing value={values.skipSharing} />\n                            <SkipValidation value={values.skipValidation} />\n                            <IsAsync value={values.isAsync} />\n                            <InclusionStrategy />\n                            <DataElementIdScheme />\n                            <EventIdScheme />\n                            <OrgUnitIdScheme />\n                            <IdScheme />\n                        </MoreOptions>\n                        <ImportButtonStrip form={form} />\n                        <FormAlerts alerts={submitError} />\n                    </form>} />\n        </Page>;\n};\n\nexport { TEIImport };","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { DataImport, DataExport, EventExport, EventImport, GMLImport, MetadataDependencyExport, MetadataExport, MetadataImport, TEIExport, TEIImport, JobOverview } from '../../pages';\n\nconst Router = () => {\n  return <Switch>\n            <Route path=\"/import/data\" component={DataImport} />\n            <Route path=\"/import/event\" component={EventImport} />\n            <Route path=\"/import/gml\" component={GMLImport} />\n            <Route path=\"/import/metadata\" component={MetadataImport} />\n            <Route path=\"/import/tei\" component={TEIImport} />\n            <Route path=\"/export/data\" component={DataExport} />\n            <Route path=\"/export/event\" component={EventExport} />\n            <Route path=\"/export/metadata-dependency\" component={MetadataDependencyExport} />\n            <Route path=\"/export/metadata\" component={MetadataExport} />\n            <Route path=\"/export/tei\" component={TEIExport} />\n            <Route path=\"/utils/job-overview\" component={JobOverview} />\n            <Redirect from=\"*\" to=\"/import/data\" />\n        </Switch>;\n};\n\nexport { Router };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { SingleSelectField, SingleSelectOption, Help } from '@dhis2/ui-core';\nimport { optionPropType, optionsPropType } from '../../utils/options';\nimport styles from './Select.module.css';\nimport { FormField } from '../';\n\nconst Select = ({\n  name,\n  dataTest,\n  label,\n  options,\n  setValue,\n  selected,\n  noMatchText,\n  loading,\n  error,\n  meta,\n  warning,\n  validationText,\n  helpText,\n  filled,\n  dense,\n  filterable,\n  initialFocus\n}) => {\n  const optionEls = options.map(o => <SingleSelectOption key={o.value} value={o.value} label={o.label} />);\n\n  const onChange = ({\n    selected\n  }) => setValue(selected);\n\n  return <FormField label={label} dataTest={dataTest}>\n            <div className={styles.select} data-test={`${dataTest}-container`}>\n                <SingleSelectField dense={dense} filled={filled} initialFocus={initialFocus} loading={loading} warning={warning} error={error} name={name} onChange={onChange} selected={selected} filterable={filterable} noMatchText={noMatchText ? noMatchText : `No match found for filter`} helpText={helpText} validationText={validationText} dataTest={`${dataTest}-ssf`}>\n                    {optionEls}\n                </SingleSelectField>\n                {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n            </div>\n        </FormField>;\n};\n\nSelect.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  name: PropTypes.string.isRequired,\n  options: optionsPropType.isRequired,\n  setValue: PropTypes.func.isRequired,\n  dense: PropTypes.bool,\n  error: PropTypes.bool,\n  filled: PropTypes.bool,\n  filterable: PropTypes.bool,\n  helpText: PropTypes.string,\n  initialFocus: PropTypes.bool,\n  loading: PropTypes.bool,\n  noMatchText: PropTypes.string,\n  selected: optionPropType,\n  validationText: PropTypes.string,\n  warning: PropTypes.bool\n};\nexport { Select };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field } from '@dhis2/ui-forms';\nimport { Select } from '../';\n\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  inputName,\n  ...rest\n}) => <Select name={inputName} meta={meta} selected={value || undefined} setValue={onChange} {...rest} />;\n\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.any,\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\n\nconst SelectField = ({\n  name,\n  ...rest\n}) => {\n  return <Field component={Wrapper} name={name} inputName={name} {...rest} />;\n};\n\nSelectField.propTypes = {\n  name: PropTypes.string.isRequired\n};\nexport { SelectField };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Checkbox, InputField, MenuItem, Radio } from '@dhis2/ui-core';\nimport { optionsPropType } from '../../utils/options';\nimport styles from './SelectableList.module.css';\n\nconst SelectableList = ({\n  label,\n  name,\n  selected,\n  setSelected,\n  list,\n  multiSelect,\n  withFilter,\n  withActions,\n  dataTest\n}) => {\n  const [filter, setFilter] = useState('');\n\n  const onSelectAll = () => {\n    if (multiSelect) {\n      const all = list.map(({\n        value\n      }) => value);\n      setSelected(all);\n    }\n  };\n\n  const onClearAll = () => {\n    if (multiSelect) {\n      setSelected([]);\n    }\n  };\n\n  const onSelect = ({\n    value: id\n  }) => {\n    if (multiSelect) {\n      const newValue = !selected.includes(id);\n\n      if (newValue == false) {\n        setSelected(selected.filter(p => p != id));\n      } else {\n        setSelected([...selected, id]);\n      }\n    } else {\n      setSelected([id]);\n    }\n  };\n\n  return <div data-test={dataTest}>\n            {withFilter && <div className={styles.filter} data-test={`${dataTest}-filter`}>\n                    <InputField name=\"filter\" label={label} value={filter} onChange={({\n        value\n      }) => setFilter(value)} dense />\n                </div>}\n\n            {withActions && <div className={styles.actions} data-test={`${dataTest}-actions`}>\n                    <Button className={styles.action} onClick={onSelectAll} dataTest={`${dataTest}-actions-select-all`}>\n                        {i18n.t('Select all')}\n                    </Button>\n                    <Button className={styles.action} onClick={onClearAll} dataTest={`${dataTest}-actions-clear-all`}>\n                        {i18n.t('Clear all')}\n                    </Button>\n                </div>}\n\n            <div className={styles.body} data-test={`${dataTest}-body`} name={name}>\n                {list.filter(({\n        label\n      }) => label.toLowerCase().includes(filter.toLowerCase())).map(({\n        value,\n        label\n      }) => {\n        const component = multiSelect ? <Checkbox value={value} name={name} label={label} checked={selected.includes(value)} onChange={() => 0} /> : <Radio value={value} name={name} label={label} checked={selected.includes(value)} onChange={() => 0} />;\n        return <MenuItem dataTest={`${dataTest}-body-li-${value}`} key={`${dataTest}-body-li-${value}`} value={value} label={component} onClick={onSelect} />;\n      })}\n            </div>\n        </div>;\n};\n\nSelectableList.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  list: optionsPropType.isRequired,\n  name: PropTypes.string.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  multiSelect: PropTypes.bool,\n  withActions: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { SelectableList };","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, Menu, MenuItem } from '@dhis2/ui-core';\nimport styles from './Sidebar.module.css';\nimport { StyledLink } from '../';\nimport { DataIcon, EventIcon, GMLIcon, MetadataDependencyExportIcon, MetadataExportIcon, MetadataImportIcon, TEIIcon, TasksIcon } from '../';\nconst dataImportPage = {\n  name: i18n.t('Data import'),\n  code: 'data-import',\n  icon: <DataIcon />,\n  path: '/import/data'\n};\nconst eventImportPage = {\n  name: i18n.t('Event import'),\n  code: 'event-import',\n  icon: <EventIcon />,\n  path: '/import/event'\n};\nconst gmlImportPage = {\n  name: i18n.t('GML import'),\n  code: 'gml-import',\n  icon: <GMLIcon />,\n  path: '/import/gml'\n};\nconst metadataImportPage = {\n  name: i18n.t('Metadata import'),\n  code: 'metadata-import',\n  path: '/import/metadata',\n  icon: <MetadataImportIcon />\n};\nconst teiImportPage = {\n  name: i18n.t('TEI import'),\n  code: 'tei-import',\n  path: '/import/tei',\n  icon: <TEIIcon />\n};\nconst dataExportPage = {\n  name: i18n.t('Data export'),\n  code: 'data-export',\n  path: '/export/data',\n  icon: <DataIcon />\n};\nconst eventExportPage = {\n  name: i18n.t('Event export'),\n  code: 'event-export',\n  path: '/export/event',\n  icon: <EventIcon />\n};\nconst metadataDependencyExportPage = {\n  name: i18n.t('Metadata dependency export'),\n  code: 'metadata-dependency-export',\n  path: '/export/metadata-dependency',\n  icon: <MetadataDependencyExportIcon />\n};\nconst metadataExportPage = {\n  name: i18n.t('Metadata export'),\n  code: 'metadata-export',\n  path: '/export/metadata',\n  icon: <MetadataExportIcon />\n};\nconst teiExportPage = {\n  name: i18n.t('TEI export'),\n  code: 'tei-export',\n  path: '/export/tei',\n  icon: <TEIIcon />\n};\nconst importPages = [dataImportPage, eventImportPage, gmlImportPage, metadataImportPage, teiImportPage];\nconst exportPages = [dataExportPage, eventExportPage, metadataDependencyExportPage, metadataExportPage, teiExportPage];\nconst jobOverviewPage = {\n  name: i18n.t('Job overview'),\n  code: 'job-overview',\n  path: '/utils/job-overview',\n  icon: <TasksIcon />\n};\n\nconst SidebarItem = ({\n  name,\n  path,\n  code,\n  icon,\n  active,\n  className\n}) => <StyledLink to={path} dataTest={`sidebar-link-${code}`}>\n        <MenuItem active={active} icon={icon} label={name} className={className} />\n    </StyledLink>;\n\nSidebarItem.propTypes = {\n  active: PropTypes.bool.isRequired,\n  code: PropTypes.string.isRequired,\n  icon: PropTypes.node.isRequired,\n  name: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  className: PropTypes.string\n};\n\nconst Sidebar = () => {\n  const location = useLocation();\n  const pathname = location.pathname;\n  return <Menu className={styles.Menu}>\n            <h3 className={styles.sectionTitle}>{i18n.t('Import')}</h3>\n            {importPages.map(({\n      icon,\n      name,\n      code,\n      path\n    }) => {\n      const active = pathname == path;\n      return <SidebarItem name={name} path={path} code={code} icon={icon} active={active} key={path} />;\n    })}\n            <Divider />\n            <h3 className={styles.sectionTitle}>{i18n.t('Export')}</h3>\n            {exportPages.map(({\n      icon,\n      name,\n      code,\n      path\n    }) => {\n      const active = pathname == path;\n      return <SidebarItem name={name} path={path} code={code} icon={icon} active={active} key={path} />;\n    })}\n            <Divider />\n            <SidebarItem name={jobOverviewPage.name} path={jobOverviewPage.path} code={jobOverviewPage.code} icon={jobOverviewPage.icon} active={pathname == jobOverviewPage.path} className={pathname == jobOverviewPage.path ? '' : styles.jobOverview} key={jobOverviewPage.path} />\n        </Menu>;\n};\n\nexport { Sidebar };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport styles from './StyledLink.module.css';\n\nconst StyledLink = ({\n  dataTest,\n  ...passThroughProps\n}) => <Link data-test={dataTest} className={styles.link} {...passThroughProps} />;\n\nStyledLink.propTypes = {\n  dataTest: PropTypes.string.isRequired\n};\nexport { StyledLink };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Field, Switch as SwitchUI } from '@dhis2/ui-forms';\nimport { FormField } from '../';\n\nconst Switch = ({\n  name,\n  label,\n  help,\n  value,\n  dataTest\n}) => {\n  return <FormField label={label} dataTest={dataTest}>\n            <Field component={SwitchUI} name={name} label={value ? i18n.t('Yes') : i18n.t('No')} helpText={help} dataTest={`${dataTest}-sf`} />\n        </FormField>;\n};\n\nSwitch.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  help: PropTypes.string,\n  value: PropTypes.bool\n};\nexport { Switch };","import { useContext } from 'react';\nimport { UserContext } from '../../contexts/';\n\nconst WithAuthority = ({\n  pred,\n  children\n}) => {\n  const user = useContext(UserContext);\n  if (!user) return null;\n  return pred(user.authorities) ? children : null;\n};\n\nexport { WithAuthority };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Help } from '@dhis2/ui-core';\nimport { FormField, SelectableList } from '../';\nconst teTypeQuery = {\n  teTypes: {\n    resource: 'trackedEntityTypes',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\n\nconst TETypePicker = ({\n  label,\n  selected,\n  setSelected,\n  meta,\n  dataTest,\n  multiSelect,\n  withFilter,\n  withActions,\n  autoSelectFirst\n}) => {\n  const [list, setList] = useState([]);\n  const {\n    error,\n    loading\n  } = useDataQuery(teTypeQuery, {\n    onComplete: data => {\n      const teTypes = data.teTypes.trackedEntityTypes;\n      const list = teTypes.map(({\n        id,\n        displayName\n      }) => ({\n        value: id,\n        label: displayName\n      }));\n      setList(list);\n\n      if (autoSelectFirst) {\n        setSelected([list[0].value]);\n      }\n    },\n    onError: error => {\n      console.error('TETypePicker error: ', error);\n    }\n  });\n  const showList = !loading && !error;\n  return <FormField label={label} dataTest={dataTest}>\n            {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n            {error && <div data-test={`${dataTest}-error`}>\n                    <p>\n                        {i18n.t('Something went wrong when loading the tracked entity types!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showList && <SelectableList name=\"teTypePicker\" label={i18n.t('Filter tracked entity types by name')} selected={selected} setSelected={setSelected} multiSelect={multiSelect} list={list} withFilter={withFilter} withActions={withActions} dataTest={`${dataTest}-list`} />}\n            {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n        </FormField>;\n};\n\nTETypePicker.defaultProps = {\n  multiSelect: false,\n  withFilter: true,\n  withActions: false,\n  autoSelectFirst: true\n};\nTETypePicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  autoSelectFirst: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  withActions: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { TETypePicker };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Help } from '@dhis2/ui-core';\nimport { FormField, SelectableList } from '../';\nconst userQuery = {\n  users: {\n    resource: 'users',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\n\nconst UserPicker = ({\n  label,\n  selected,\n  setSelected,\n  meta,\n  dataTest,\n  multiSelect,\n  withFilter,\n  withActions,\n  autoSelectFirst\n}) => {\n  const [list, setList] = useState([]);\n  const {\n    error,\n    loading\n  } = useDataQuery(userQuery, {\n    onComplete: data => {\n      const users = data.users.users;\n      const list = users.map(({\n        id,\n        displayName\n      }) => ({\n        value: id,\n        label: displayName\n      }));\n      setList(list);\n\n      if (autoSelectFirst) {\n        setSelected([list[0].value]);\n      }\n    },\n    onError: error => {\n      console.error('UserPicker error: ', error);\n    }\n  });\n  const showList = !loading && !error;\n  return <FormField label={label} dataTest={dataTest}>\n            {loading && <CircularLoader dataTest={`${dataTest}-loading`} />}\n            {error && <div data-test={`${dataTest}-error`}>\n                    <p>\n                        {i18n.t('Something went wrong when loading the users!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showList && <SelectableList name=\"userPicker\" label={i18n.t('Filter users by name')} selected={selected} setSelected={setSelected} multiSelect={multiSelect} list={list} withFilter={withFilter} withActions={withActions} dataTest={`${dataTest}-list`} />}\n            {(meta.touched || !meta.pristine) && meta.error && <Help error>{meta.error}</Help>}\n        </FormField>;\n};\n\nUserPicker.defaultProps = {\n  multiSelect: true,\n  withFilter: true,\n  withActions: false,\n  autoSelectFirst: true\n};\nUserPicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setSelected: PropTypes.func.isRequired,\n  autoSelectFirst: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  withActions: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { UserPicker };","import React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport i18n from '@dhis2/d2-i18n';\nimport { CssReset, CircularLoader, ScreenCover } from '@dhis2/ui-core';\nimport { TaskContext } from './contexts/';\nimport { UserContext } from './contexts/';\nimport { useUser, useTasks } from './hooks/';\nimport styles from './App.module.css';\nimport { Sidebar } from './components/';\nimport { Router } from './components/';\n\nconst App = () => {\n  const {\n    tasks,\n    addTask,\n    jobOverview,\n    updateJobOverview\n  } = useTasks();\n  const {\n    loading,\n    error,\n    user\n  } = useUser();\n  const showApp = !loading && !error;\n  return <>\n            <CssReset />\n            {loading && <ScreenCover dataTest=\"app-screen-cover\">\n                    <CircularLoader dataTest=\"app-loader\" />\n                </ScreenCover>}\n            {error && <div data-test=\"app-error\">\n                    <p>\n                        {i18n.t('Something went wrong when loading the current user!')}\n                    </p>\n                    <p>{error.message}</p>\n                </div>}\n            {showApp && <HashRouter>\n                    <UserContext.Provider value={user}>\n                        <TaskContext.Provider value={{\n          tasks,\n          addTask,\n          jobOverview,\n          updateJobOverview\n        }}>\n                            <div className={styles.container}>\n                                <div className={styles.sidebar}>\n                                    <Sidebar />\n                                </div>\n                                <div className={styles.content}>\n                                    <Router />\n                                </div>\n                            </div>\n                        </TaskContext.Provider>\n                    </UserContext.Provider>\n                </HashRouter>}\n        </>;\n};\n\nexport default App;"],"sourceRoot":""}